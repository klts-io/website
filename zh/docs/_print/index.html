<!doctype html><html lang=zh class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.87.0"><link rel=canonical type=text/html href=/zh/docs/>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>æ–‡æ¡£ | KLTS.io</title>
<meta name=description content="KLTS çš„å®˜ç½‘"><meta property="og:title" content="æ–‡æ¡£">
<meta property="og:description" content="KLTS çš„å®˜ç½‘">
<meta property="og:type" content="website">
<meta property="og:url" content="/zh/docs/"><meta property="og:site_name" content="KLTS.io">
<meta itemprop=name content="æ–‡æ¡£">
<meta itemprop=description content="KLTS çš„å®˜ç½‘"><meta name=twitter:card content="summary">
<meta name=twitter:title content="æ–‡æ¡£">
<meta name=twitter:description content="KLTS çš„å®˜ç½‘">
<link rel=preload href=/scss/main.min.650bdee92aa16b3ae39822dd8dfd62356c714a590c397f4abe76572440c62901.css as=style>
<link href=/scss/main.min.650bdee92aa16b3ae39822dd8dfd62356c714a590c397f4abe76572440c62901.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/zh/>
<span class=navbar-logo><svg id="Graph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><g id="KLTS_-_Graph_-_Light" data-name="KLTS - Graph - Light"><path id="Secondary" d="M174.54 276.539c-23.254 5.244-46.3 13.984-70.386 26.563V249.768A322.072 322.072.0 01153.4 232.2q11.784-3.111 23.743-5.193a84.322 84.322.0 00-2.6 49.53zm54.832-100.2c-18.627-17.387-38.964-31.808-61.2-44.965L119.7 159.357c29.816 15.76 52.067 30.719 69.575 45.639a84.135 84.135.0 0140.097-28.661zm20.63-4.1c1.983-.14 3.979-.237 6-.237a83.588 83.588.0 0141.393 10.916 251.959 251.959.0 00.78-28.448 297.8 297.8.0 00-6.564-53.245L256 80.664l-16.489 9.52c6.65 24.114 10.095 45.37 10.682 65.672Q250.433 164.112 250 172.237zm-64.76 129.007q-4.648 8.227-8.758 16.752a324.529 324.529.0 00-20.49 55.6l43.21 24.947c5.824-24.5 13.469-45.93 23.455-65.437A84.3 84.3.0 01185.242 301.244zM374.19 148.9c-19 18.863-37.743 34.831-58.691 47.809a83.826 83.826.0 0122.786 42.325c25.366-15.381 47.642-34.187 69.561-55.9v-14.8zM298.741 328.308A83.582 83.582.0 01256 340q-2.149.0-4.272-.108c1.842 4.863 3.807 9.68 5.93 14.446 8.355 18.751 19.118 37.369 33 56.991l41.757-24.108c-13.306-18.382-23.351-35.46-30.908-52.419C300.542 332.644 299.63 330.478 298.741 328.308zm40.874-64.358a83.578 83.578.0 01-18.131 44.635c26.246 8.936 54.539 14.141 86.362 16.028v-48.08a284.525 284.525.0 01-57.161-9.231Q345.087 265.763 339.615 263.95z" fill="#fff" opacity=".66"/><path id="Primary" d="M256 71.426l159.846 92.287V348.287L256 440.574 96.154 348.287V163.713L256 71.426M256 16 48.154 136V376L256 496 463.846 376V136L256 16zm0 204a36 36 0 11-25.456 10.544A35.767 35.767.0 01256 220m0-48a84 84 0 1059.4 24.6A83.738 83.738.0 00256 172z" fill="#fff"/><rect id="Frame" width="512" height="512" fill="none"/></g></svg></span><span class="text-uppercase font-weight-bold">KLTS.io</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/zh/about/><span>å…³äº</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/zh/blog/><span>åšå®¢</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/zh/docs/><span class=active>æ–‡æ¡£</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
ä¸­æ–‡ Chinese
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/docs/>English</a>
</div>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; ç«™å†…æœç´¢â€¦" aria-label=ç«™å†…æœç´¢â€¦ autocomplete=off data-offline-search-index-json-src=/offline-search-index.4e6c2ffb05cb533734647be7b926ad8e.json data-offline-search-base-href=/ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
è¿™æ˜¯æœ¬èŠ‚çš„å¤šé¡µæ‰“å°è§†å›¾ã€‚
<a href=# onclick="return print(),!1">ç‚¹å‡»æ­¤å¤„æ‰“å°</a>.
</p><p>
<a href=/zh/docs/>è¿”å›æœ¬é¡µå¸¸è§„è§†å›¾</a>.
</p>
</div>
<h1 class=title>æ–‡æ¡£</h1>
<ul>
<li>1: <a href=#pg-18d58d2666f9af2b2086e0baa55f315d>ç®€ä»‹</a></li>
<li>2: <a href=#pg-50ddcb3cdb08fbe2ad5d04311c273b4c>å‡†å¤‡</a></li>
<li>3: <a href=#pg-64407d3e6d5ef382426bdfbcae040c6a>æ­£å¸¸å®‰è£…</a></li>
<li>4: <a href=#pg-c170895d2a643e556fcae1338dee8dce>è„šæœ¬ä¸€é”®å®‰è£…</a></li>
<li>5: <a href=#pg-cf1a7e96c5bc452942429f7b1a8d0306>ä¿®å¤çš„æ¼æ´</a></li>
<ul>
<li>5.1: <a href=#pg-be897afcde62036b99d0be161d71d482>CVE-2021-25741</a></li>
<li>5.2: <a href=#pg-d4317cf8912bca37373fe5558d2d6285>CVE-2021-3121</a></li>
<li>5.3: <a href=#pg-ce240d314dc85c8ab698d26f1466e5a2>CVE-2020-8559</a></li>
<li>5.4: <a href=#pg-5aa68ad2e414f83fec8b9beb2250fdd3>CVE-2020-8558</a></li>
<li>5.5: <a href=#pg-c1ec3633b18a80bee04f17816082420b>CVE-2020-8552</a></li>
<li>5.6: <a href=#pg-fa6c26ffb59581078942a7046be853db>CVE-2019-1002101</a></li>
<li>5.7: <a href=#pg-3bb42a6493fbd1d3d06aad85c3d8d1e7>CVE-2019-11251</a></li>
<li>5.8: <a href=#pg-da5de8654ce647927106ce1dae3b6382>CVE-2019-11248</a></li>
<li>5.9: <a href=#pg-d902d3ffd5b3d43bf94a51814ab569c7>CVE-2019-11247</a></li>
<li>5.10: <a href=#pg-17adf9e532c044f0bc96bf2fe6fabb70>CVE-2019-11246</a></li>
<li>5.11: <a href=#pg-678704d1c81cba20ab7f9af62e484052>CVE-2019-11245</a></li>
<li>5.12: <a href=#pg-9677918ea7ce2b1d4116bfb9d4d31512>CVE-2019-11249</a></li>
<li>5.13: <a href=#pg-66481705776642cc7da302c2a84c2907>nokmem</a></li>
</ul>
<li>6: <a href=#pg-810bac82108a5b9ba17ebba536d679bf>æ·»åŠ  CVE è¡¥ä¸åˆ° klts</a></li>
<li>7: <a href=#pg-9662232d61bca04520940eafdc2967e8>ç‰ˆæœ¬æ—¥å¿—</a></li>
<ul>
<li>7.1: <a href=#pg-4fa179b3f919d394dbeffd1ed1605e46>v1.23</a></li>
<ul>
<li>7.1.1: <a href=#pg-0baa225c967bd1ebbf764e2a5b8a571a>v1.23.4-lts.1</a></li>
</ul>
<li>7.2: <a href=#pg-c047e6d1ee8dacb74e7c5d5ab95bebcd>v1.22</a></li>
<ul>
<li>7.2.1: <a href=#pg-0fc555ad48f02740e6bc8881266dd9ff>v1.22.7-lts.1</a></li>
</ul>
<li>7.3: <a href=#pg-01eb7d3a82aab93a8a4b1d1e7efdfef9>v1.21</a></li>
<ul>
<li>7.3.1: <a href=#pg-74446b3a77f744c15bc6cfdae5d25a02>v1.21.10-lts.1</a></li>
</ul>
<li>7.4: <a href=#pg-20753a751036d9825dd1807db9fedb5f>v1.20</a></li>
<ul>
<li>7.4.1: <a href=#pg-d3e3289a812dbea417a18b1b47ce7b91>v1.20.16-lts.1</a></li>
</ul>
<li>7.5: <a href=#pg-f9de07315ec208fab6e5c13024a2ce64>v1.19</a></li>
<ul>
<li>7.5.1: <a href=#pg-101e741dc17aaa2791af948b2cc29d09>v1.19.16-lts.1</a></li>
<li>7.5.2: <a href=#pg-f677a41be7eb5d233978046bb3cf15a0>v1.19.16-lts.2</a></li>
</ul>
<li>7.6: <a href=#pg-6525c9e3fb6b93a7733196db45f3decf>v1.18</a></li>
<ul>
<li>7.6.1: <a href=#pg-3aad22b5fa10ac4b1170fe162f9be940>v1.18.20-lts.1</a></li>
<li>7.6.2: <a href=#pg-b4c871eee2d42bdcff8479ff2298fc97>v1.18.20-lts.2</a></li>
</ul>
<li>7.7: <a href=#pg-2270bff767707e56d3db5151552ee5e7>v1.17</a></li>
<ul>
<li>7.7.1: <a href=#pg-1912fbf1f803c511b573029d327eaab7>v1.17.17-lts.1</a></li>
</ul>
<li>7.8: <a href=#pg-10a9386cc9c8d0a78f738e74e8017feb>v1.16</a></li>
<ul>
<li>7.8.1: <a href=#pg-d809e31f592dc7918fa421d4d5fcad8a>v1.16.15-lts.1</a></li>
</ul>
<li>7.9: <a href=#pg-1c3b45c2635fddab2687cd5bdd3887e5>v1.15</a></li>
<ul>
<li>7.9.1: <a href=#pg-93eb576cef91a97a721b738b99609a65>v1.15.12-lts.1</a></li>
</ul>
<li>7.10: <a href=#pg-b006ac46509d2d3406cd0499bc3f1517>v1.14</a></li>
<ul>
<li>7.10.1: <a href=#pg-73f06559fbf8770b07e5a1b9124b796a>v1.14.10-lts.1</a></li>
</ul>
<li>7.11: <a href=#pg-c07a278d274fb18221e937fe0cf11ad8>v1.13</a></li>
<ul>
<li>7.11.1: <a href=#pg-54d322ad1fac2f6a8afd50a52e4d49fa>v1.13.12-lts.1</a></li>
</ul>
<li>7.12: <a href=#pg-e7a48963a7388a7bdcf3c2e0efa67f24>v1.12</a></li>
<ul>
<li>7.12.1: <a href=#pg-821074ba2798466a54d10d5e0f367ac2>v1.12.10-lts.1</a></li>
</ul>
<li>7.13: <a href=#pg-4505b460b3d867cd384f7ee57eb36337>v1.11</a></li>
<ul>
<li>7.13.1: <a href=#pg-c06aa76c9df9f82bd046eb0f01e0ea9c>v1.11.10-lts.1</a></li>
</ul>
<li>7.14: <a href=#pg-bcc7e5c745acc27b204884b44e0c3cbb>v1.10</a></li>
<ul>
<li>7.14.1: <a href=#pg-ffbcd5ebf3f1c36ebfe008f5a6ad4f0b>v1.10.13-lts.1</a></li>
</ul>
</ul>
<li>8: <a href=#pg-4ea5ec9f40d271955e679919836ca15a>Containerd</a></li>
<ul>
<li>8.1: <a href=#pg-dfed8f673232f42492878a06c4fd00a2>ä¿®å¤çš„æ¼æ´</a></li>
<ul>
<li>8.1.1: <a href=#pg-e9361514b1c4a6b356b66541847b30b2>CVE-2021-41103</a></li>
</ul>
<li>8.2: <a href=#pg-3e836e30cf6d82e7ba52f18ff1014469>ç‰ˆæœ¬æ—¥å¿—</a></li>
<ul>
<li>8.2.1: <a href=#pg-d12c1156c3a7ffcccdbc9a23eaa464fb>v1.3</a></li>
<ul>
<li>8.2.1.1: <a href=#pg-ba6a1de6462c22fab2fedb173af0d8f2>v1.3.10-lts.1</a></li>
</ul>
</ul>
</ul>
<li>9: <a href=#pg-a7c9e10a31abdecaec5a338462a220a8>å¼€å‘æŒ‡å—</a></li>
<ul>
<li>9.1: <a href=#pg-79fcc7e024580df9da30cdb10805eada>å…‹éš†</a></li>
<li>9.2: <a href=#pg-8da562538e76378aaf2ff1c50166f299>ä¾èµ–</a></li>
</ul>
</ul>
<div class=content>
</div>
</div>
<div class=td-content>
<h1 id=pg-18d58d2666f9af2b2086e0baa55f315d>1 - ç®€ä»‹</h1>
<p>KLTS å…¨ç§°ä¸º Kubernetes Long Term Supportï¼Œä¸»è¦ä½¿å‘½æ˜¯ä¸º Kubernetes æ—©æœŸç‰ˆæœ¬æä¾›é•¿æœŸå…è´¹çš„ç»´æŠ¤æ”¯æŒã€‚</p>
<p>ä¹‹æ‰€ä»¥éœ€è¦ç»´æŠ¤æ—©æœŸç‰ˆæœ¬ï¼Œæ˜¯å› ä¸ºåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ€æ–°ç‰ˆæœ¬ä¸ä¸€å®šæ˜¯æœ€å¥½çš„ï¼Œä¹Ÿä¸æ˜¯æœ€ç¨³å®šçš„ã€‚æ­£å¸¸è€Œè¨€ï¼ŒKubernetes ç¤¾åŒºç‰ˆæœ¬çš„ç»´æŠ¤å‘¨æœŸåªæœ‰ä¸€å¹´å·¦å³ï¼Œè¯·å‚é˜… <a href=#release-cycle>Kubernetes ç‰ˆæœ¬å‘è¡Œå‘¨æœŸ</a>ã€‚åœ¨ç¤¾åŒºåœæ­¢ç»´æŠ¤åï¼ŒKLTS åœ¨æ¥ä¸‹æ¥çš„ä¸‰å¹´å†…æä¾›å…è´¹ç»´æŠ¤æœåŠ¡ã€‚</p>
<p>åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œä¸ºä»€ä¹ˆå¤§å¤šæ•°ä¼ä¸šé€‰æ‹©é‡‡ç”¨æ—©æœŸçš„ Kubernetes ç‰ˆæœ¬ç®¡æ§é›†ç¾¤å‘¢ï¼Ÿ</p>
<ul>
<li>
<p>é¦–å…ˆï¼Œå‡çº§é¢‘ç‡é«˜ä¼šå¸¦æ¥å˜æ›´é£é™©ï¼Œæ¯æ¬¡å‡çº§å¿…é¡»è¿›è¡Œå……åˆ†éªŒè¯ã€‚ç‰¹åˆ«æ˜¯é‡‘èè¡Œä¸šçš„å¹³å°å±‚å˜æ›´å‘¨æœŸé€šå¸¸æ¯”è¾ƒé•¿ï¼Œå› ä¸ºä¸€æ—¦å‡çº§åçš„æ–°ç‰ˆæœ¬å­˜åœ¨ bugï¼Œå°±éœ€è¦è¢«è¿«å›æ»šæˆ–å¿«é€Ÿå“åº”å‡çº§è‡³æ›´æ–°çš„ç‰ˆæœ¬ï¼Œè¿™æ ·ä¼šé€ æˆä¸å¿…è¦çš„æˆæœ¬æ”¯å‡ºã€‚</p>
</li>
<li>
<p>å…¶æ¬¡ï¼ŒKubernetes å‡çº§åéƒ¨åˆ†åŠŸèƒ½çš„æ›¿ä»£æ–¹æ¡ˆè¿˜æ²¡æœ‰å®Œå…¨ç”Ÿäº§å°±ç»ªï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¸¸ä¼šå‡ºç°ä¸å…¼å®¹çš„çŠ¶å†µã€‚</p>
</li>
<li>
<p>æœ€åï¼ŒKubernetes ç¤¾åŒºä»…æ”¯æŒå°ç‰ˆæœ¬ +1 å‡çº§ï¼Œä¸æ”¯æŒè·¨ç‰ˆæœ¬å‡çº§ï¼Œå› ä¸ºè·¨ç‰ˆæœ¬å‡çº§ç»å¸¸ä¼šå‡ºç°ä¸€äº›ä¸å¯æ§çš„å› ç´ ï¼Œé€ æˆæ›´å¤§çš„ç”Ÿäº§é—®é¢˜ã€‚</p>
</li>
</ul>
<p>æ‰€ä»¥å¤§å¤šæ•°ä¼ä¸šçš„é€‰æ‹©æ˜¯æ²¿ç”¨æ—©æœŸç‰ˆæœ¬ï¼Œä¸ä¼šè´¸ç„¶å‡çº§ã€‚ä½† Kubernetes ç¤¾åŒºåªç»´æŠ¤æœ€æ–°çš„ 3 åˆ° 4 ä¸ªç‰ˆæœ¬ï¼Œå¦‚ä½•æ‰èƒ½ä¿è¯è¿™äº›æ—©æœŸç‰ˆæœ¬å…å—ç¤¾åŒºä¸å®šæ—¶å‘ç°çš„ CVE æ¼æ´å’Œ bug çš„è¢­æ‰°å‘¢ï¼Ÿè¿™å°±æ˜¯ KLTS çš„ä»·å€¼æ‰€åœ¨ï¼æˆ‘ä»¬å¯¹æ—©æœŸç‰ˆæœ¬æä¾›é•¿è¾¾ 3 å¹´çš„å…è´¹ç»´æŠ¤æ”¯æŒï¼Œç§¯æä¿®å¤æ—©æœŸç‰ˆæœ¬çš„ CVE å®‰å…¨æ¼æ´å’Œé‡å¤§ bugã€‚</p>
<h2 id=maint-cycle>KLTS ç»´æŠ¤å‘¨æœŸ</h2>
<p>Kubernetes ç‰ˆæœ¬å·è¡¨ç¤ºä¸º x.y.zï¼Œå…¶ä¸­ x æ˜¯å¤§ç‰ˆæœ¬å·ï¼Œy æ˜¯å°ç‰ˆæœ¬å·ï¼Œz æ˜¯è¡¥ä¸ç‰ˆæœ¬ï¼ŒKLTS æä¾›çš„è¡¥ä¸ç‰ˆæœ¬å·é€šå¸¸ä»¥ lts1ã€lts2 â€¦ ltsn è¡¨ç¤ºã€‚ä¸ºäº†æ–¹ä¾¿è¡¨è¿°ï¼Œæœ¬èŠ‚ç”¨å‰ä¸¤ä½ x.y æè¿° Kubernetes ç‰ˆæœ¬å·ã€‚</p>
<p>å‡è®¾ç¤¾åŒºå‘å¸ƒçš„æœ€æ–° Kubernetes ç‰ˆæœ¬ä¸º x.yï¼Œæ ¹æ®<a href=https://kubernetes.io/releases/version-skew-policy/#supported-versions>ç¤¾åŒºç‰ˆæœ¬ç»´æŠ¤å£°æ˜</a>ï¼Œç¤¾åŒºä»…ç»´æŠ¤æœ€è¿‘çš„ä¸‰ä¸ªç‰ˆæœ¬ï¼Œè€Œ KLTS ç›®å‰ç»´æŠ¤ä» 1.10 èµ·çš„è¿‘åä¸ªæ—©æœŸç‰ˆæœ¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<img src=../klts_job.png width=750>
<p>å½“ Kubernetes ç¤¾åŒºå‘ç°å¯èƒ½å½±å“ç”Ÿäº§çš„ CVE æ–°æ¼æ´æˆ– bugï¼Œå—åˆ°å½±å“çš„å¯èƒ½ä¸æ­¢æ˜¯ç¤¾åŒºæ­£åœ¨ç»´æŠ¤çš„ç‰ˆæœ¬ï¼Œè¿˜æœ‰ä¹‹å‰å·²ç»åœæ­¢ç»´æŠ¤ã€ä½†ä¼ä¸šä»åœ¨ä½¿ç”¨ã€ä¸”ä¸èƒ½è´¸ç„¶å‡çº§çš„ç‰ˆæœ¬ï¼ŒKLTS å›¢é˜Ÿç»´æŠ¤çš„æ­£æ˜¯è¿™äº›ç¤¾åŒºæ”¾å¼ƒç»´æŠ¤çš„ç‰ˆæœ¬ã€‚ç›®å‰ KLTS çš„ç‰ˆæœ¬ç»´æŠ¤å‘¨æœŸå¦‚ä¸‹ï¼š</p>
<p><img src=../images/whatKLTSdoes.png alt="KLTS ç»´æŠ¤ç‰ˆæœ¬"></p>
<p>ä»ä¸Šå›¾å¯çœ‹å‡ºï¼ŒKubernetes ç¤¾åŒºå¯¹æŸä¸ªç‰ˆæœ¬çš„ç»´æŠ¤å‘¨æœŸé€šå¸¸åœ¨ä¸€å¹´å·¦å³ï¼Œè€Œ KLTS å¯ä»¥åœ¨æ¥ä¸‹æ¥çš„ä¸‰å¹´å†…æä¾›é•¿æœŸç»´æŠ¤ï¼Œç›´è‡³ä»£ç æ— æ³•å…¼å®¹ï¼Œæ‰ä¼šå°†ç›¸åº”ç‰ˆæœ¬æ·˜æ±°ã€‚</p>
<h2 id=bug-fix>KLTS ä¿®å¤èŒƒå›´</h2>
<p>æœ‰äº›é«˜ä¼˜å…ˆçº§çš„ CVE æˆ–ä¸¥é‡ Bug å­˜åœ¨äºç”Ÿäº§ç¯å¢ƒä¸­ä¼šé€ æˆè¾ƒå¤§çš„å®‰å…¨éšæ‚£ã€‚CVE å®‰å…¨é—®é¢˜æ˜¯é›†ç¾¤çš„ç”Ÿå‘½çº¿ï¼ŒKLTS ä¼šä¼˜å…ˆä¿®å¤ä¸­é«˜çº§åˆ«çš„ CVEï¼Œå…¶æ¬¡ä¼šä¿®å¤é‡å¤§ Bugï¼Œç¡®ä¿ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œã€‚</p>
<p>ä»¥ 2021 å¹´ 1 æœˆå‘ç°çš„ <a href=https://www.cvedetails.com/cve/CVE-2021-3121>CVE-2021-3121</a> å®‰å…¨æ¼æ´ä¸ºä¾‹ï¼ŒCVSS å±æ€¥åˆ†æ•°é«˜è¾¾ 7.5ã€‚ä½†æˆªæ­¢ 2021 å¹´ 9 æœˆ Kubernetes ç¤¾åŒºï¼š</p>
<ul>
<li>ä»…ä¿®å¤äº† 4 ä¸ªç‰ˆæœ¬ï¼š1.18ã€1.19ã€1.20ã€1.21</li>
<li>å®£ç§°â€œæ‰€æœ‰æ—©æœŸç‰ˆæœ¬å‡æœ‰è¿™ä¸ªå®‰å…¨æ¼æ´ï¼Œå»ºè®®ç”¨æˆ·ç«‹å³åœæ­¢ä½¿ç”¨æ—©æœŸç‰ˆæœ¬â€</li>
<li>æ‹’ç»<a href=https://github.com/kubernetes/kubernetes/issues/101435>ä¿®å¤æ—©æœŸç‰ˆæœ¬æ¼æ´çš„è¦æ±‚</a></li>
</ul>
<p><img src=../images/cve2021.png alt=CVE-2021-3121></p>
<p>KLTS é’ˆå¯¹è¿™ä¸€ç°çŠ¶ï¼Œé»˜é»˜ä¿®å¤äº†æ·±å— <a href=https://www.cvedetails.com/cve/CVE-2021-3121>CVE-2021-3121</a> å®‰å…¨æ¼æ´å½±å“çš„ 8 ä¸ªæ—©æœŸç‰ˆæœ¬ï¼š</p>
<ul>
<li>v1.17.17</li>
<li>v1.16.15</li>
<li>v1.15.12</li>
<li>v1.14.10</li>
<li>v1.13.12</li>
<li>v1.12.10</li>
<li>v1.11.10</li>
<li>v1.10.13</li>
</ul>
<p>å¦‚æœæ‚¨è§‰å¾— KLTS å›¢é˜Ÿçš„ä»˜å‡ºæœ‰ä»·å€¼ï¼Œè®©æ‚¨å€¼å¾—ä¿¡èµ–ï¼Œæ¬¢è¿ä»»ä½•å¼€å‘è€…åŠ å…¥ <a href=https://github.com/klts-io>KLTS ç¤¾åŒº</a>äº¤æµå¹¶åšå‡ºè´¡çŒ®ã€‚</p>
<h2 id=klts-benefits>æ¬¢è¿æºæ‰‹åŸ¹è‚²ç¡•æœ</h2>
<p>è¾›å‹¤çš„è€•è€˜ï¼Œæœ€ç»ˆæ”¶è·çš„æ˜¯ç¾ä¸½èŠ±æœµå’Œç´¯ç´¯ç¡•æœã€‚ç»è¿‡å¼€å‘è€…ç²¾å¿ƒçš„ç»´æŠ¤æ”¯æŒï¼ŒKLTS ä¸ºè¿™äº›æ—©æœŸç‰ˆæœ¬å¸¦æ¥ä»¥ä¸‹æˆæœï¼š</p>
<ul>
<li>
<p><strong>ä¸‰å¹´ç»´æŠ¤æœŸ</strong>ï¼šKubernetes ç¤¾åŒºå¯¹æ¯ä¸ªç‰ˆæœ¬æä¾›ä¸€å¹´å·¦å³çš„ç»´æŠ¤ï¼Œè€Œ KLTS æ¥ä¸‹æ¥ä¼šä¸ºè¯¥ç‰ˆæœ¬æä¾›é•¿è¾¾ä¸‰å¹´çš„æŒç»­ç»´æŠ¤ã€‚</p>
</li>
<li>
<p><strong>å®‰å…¨ç¨³å®š</strong>ï¼šå°ç‰ˆæœ¬å‡çº§æ›´å®‰å…¨ï¼Œå…¼å®¹æ€§é«˜ã€‚æ¸è¿›å¼å‡çº§ç¨³å®šæ€§æ›´å¥½ã€‚è­¬å¦‚æœ€æ–°ç‰ˆæœ¬çš„æ–°åŠŸèƒ½ä¹Ÿè®¸å¾ˆæœ‰å¸å¼•åŠ›ï¼Œä½†æ˜¯ä¸ä¸€å®šèƒ½è¾¾åˆ°ç”Ÿäº§å¯ç”¨çš„æ ‡å‡†ï¼Œéœ€è¦è¾ƒé•¿æ—¶é—´çš„ç§¯ç´¯ã€‚</p>
</li>
<li>
<p><strong>æ˜“äºå®‰è£…</strong>ï¼šç»“åˆå›½å†…é•œåƒåŠ é€Ÿï¼ŒåŸç”Ÿæ”¯æŒ Kubeadmï¼Œæ”¯æŒ CentOSã€Ubuntuã€openSUSEï¼Œè¿˜æä¾›äº†ä¸€é”®å®‰è£…è„šæœ¬ã€‚</p>
</li>
<li>
<p><strong>å…¬å¼€é€æ˜</strong>ï¼šåœ¨ GitHub æ‰˜ç®¡çš„å¼€æºé¡¹ç›®ï¼Œå…¨æµç¨‹å…¬å¼€ã€‚</p>
</li>
<li>
<p><strong>å…¨é“¾è·¯è§„åˆ’</strong>ï¼šåç»­ä¼šæ·»åŠ  Containerd åŠå…¶ä»–ç»„ä»¶çš„é•¿æœŸç»´æŠ¤ã€‚</p>
</li>
</ul>
<p>åœ¨æ­¤ä¹Ÿå‘å¹¿å¤§çš„å¼€å‘è€…ï¼Œå†æ¬¡å‘å‡ºé‚€è¯·ï¼Œå¦‚æœæ‚¨è§‰å¾— KLTS å›¢é˜Ÿçš„ä»˜å‡ºæœ‰ä»·å€¼ï¼Œè®©æ‚¨å€¼å¾—ä¿¡èµ–ï¼Œæ¬¢è¿ä»»ä½•å¼€å‘è€…åŠ å…¥ KLTS ç¤¾åŒºäº¤æµå¹¶è´¡çŒ®ï¼ŒæœŸå¾…æ‚¨çš„ä»»ä½•æ„è§ã€å»ºè®®æˆ–è§£å†³æ–¹æ¡ˆã€‚</p>
<ul>
<li>åŠ å…¥ <a href=https://github.com/klts-io>KLTS ç¤¾åŒº</a></li>
<li>åŠ å…¥ <a href=https://klts.slack.com/archives/C02H8DMB6SZ>KLTS Slack èŠå¤©é¢‘é“</a></li>
</ul>
<h2 id=release-cycle>Kubernetes ç‰ˆæœ¬å‘è¡Œå‘¨æœŸ</h2>
<p>Kubernetes ç¤¾åŒºæœ€è¿‘åå¤šä¸ªç‰ˆæœ¬çš„å‘å¸ƒæ—¶é—´ç»Ÿè®¡å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style=text-align:left><strong>K8s ç‰ˆæœ¬</strong></th>
<th style=text-align:left><strong>åˆæ¬¡å‘å¸ƒæ—¥æœŸ</strong></th>
<th style=text-align:left><strong>EOL æ—¥æœŸ</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:left>1.10</td>
<td style=text-align:left>2018-03-27</td>
<td style=text-align:left>2019-02-13</td>
</tr>
<tr>
<td style=text-align:left>1.11</td>
<td style=text-align:left>2018-07-28</td>
<td style=text-align:left>2019-05-01</td>
</tr>
<tr>
<td style=text-align:left>1.12</td>
<td style=text-align:left>2018-09-28</td>
<td style=text-align:left>2019-07-08</td>
</tr>
<tr>
<td style=text-align:left>1.13</td>
<td style=text-align:left>2018-12-04</td>
<td style=text-align:left>2019-10-15</td>
</tr>
<tr>
<td style=text-align:left>1.14</td>
<td style=text-align:left>2019-03-25</td>
<td style=text-align:left>2019-12-11</td>
</tr>
<tr>
<td style=text-align:left>1.15</td>
<td style=text-align:left>2019-07-20</td>
<td style=text-align:left>2020-05-06</td>
</tr>
<tr>
<td style=text-align:left>1.16</td>
<td style=text-align:left>2019-09-18</td>
<td style=text-align:left>2020-09-02</td>
</tr>
<tr>
<td style=text-align:left>1.17</td>
<td style=text-align:left>2019-12-08</td>
<td style=text-align:left>2021-01-13</td>
</tr>
<tr>
<td style=text-align:left>1.18</td>
<td style=text-align:left>2020-03-25</td>
<td style=text-align:left>2021-06-18</td>
</tr>
<tr>
<td style=text-align:left>1.19</td>
<td style=text-align:left>2020-08-26</td>
<td style=text-align:left>2021-10-28</td>
</tr>
<tr>
<td style=text-align:left>1.20</td>
<td style=text-align:left>2020-12-08</td>
<td style=text-align:left>2022-02-28</td>
</tr>
<tr>
<td style=text-align:left>1.21</td>
<td style=text-align:left>2021-04-08</td>
<td style=text-align:left>2022-06-28</td>
</tr>
<tr>
<td style=text-align:left>1.22</td>
<td style=text-align:left>2021-08-04</td>
<td style=text-align:left>2022-10-28</td>
</tr>
</tbody>
</table>
<p>åˆæ¬¡å‘å¸ƒï¼šæŒ‡çš„æ˜¯ Kubernetes åˆæ¬¡å‘å¸ƒçš„ 0 å·ç‰ˆæœ¬ï¼Œå³ 1.10.0ã€1.11.0 &mldr; 1.22.0 ç­‰ã€‚</p>
<p>EOL å…¨ç§°ä¸º End Of Lifeï¼Œå³å®˜æ–¹ç¤¾åŒºç»“æŸç»´æŠ¤ï¼Œé€šå¸¸å‘ç”Ÿåœ¨åˆæ¬¡å‘å¸ƒå¤§çº¦ 1 å¹´åï¼Œè¿™ä¹Ÿæ˜¯å®˜æ–¹ç¤¾åŒºå‘å¸ƒçš„æœ€åä¸€ä¸ª bug fix ç‰ˆæœ¬ã€‚</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-50ddcb3cdb08fbe2ad5d04311c273b4c>2 - å‡†å¤‡</h1>
<p><img src=https://raw.githubusercontent.com/kubernetes/kubeadm/master/logos/stacked/color/kubeadm-stacked-color.png align=right width=150px>æœ¬é¡µä»‹ç»å®‰è£… Kubernetes ä¹‹å‰éœ€è¦åšå¥½çš„ä¸€äº›å‡†å¤‡å·¥ä½œï¼Œä¾‹å¦‚å…ˆè¦å®‰è£… <code>kubeadm</code> å·¥å…·ç®±ã€‚æœ‰å…³åœ¨å®‰è£…æ­¤å·¥å…·ç®±åå¦‚ä½•ç”¨å…¶åˆ›å»ºé›†ç¾¤ï¼Œè¯·å‚é˜…<a href=/zh/docs/install target>æ­£å¸¸å®‰è£…</a>ã€‚</p>
<h2 id=å‡†å¤‡å·¥ä½œ>å‡†å¤‡å·¥ä½œ</h2>
<ul>
<li>å‡†å¤‡ä¸€å°å…¼å®¹çš„ Linux ä¸»æœºã€‚Kubernetes é¡¹ç›®ä¸ºåŸºäº Debian å’Œ Red Hat çš„ Linux
å‘è¡Œç‰ˆä»¥åŠä¸€äº›ä¸æä¾›åŒ…ç®¡ç†å™¨çš„å‘è¡Œç‰ˆæä¾›é€šç”¨çš„æŒ‡ä»¤ã€‚</li>
<li>æ¯å°ä¸»æœºè‡³å°‘ 2 GB æˆ–æ›´å¤šçš„å†…å­˜ï¼ˆå¦‚æœå†…å­˜å¤ªå°‘å°†å½±å“åº”ç”¨çš„è¿è¡Œï¼‰</li>
<li>CPU 2 æ ¸æˆ–æ›´å¤š</li>
<li>é›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœºçš„ç½‘ç»œè¿é€šï¼ˆå…¬ç½‘å’Œå†…ç½‘ï¼‰</li>
<li>å•ä¸ªèŠ‚ç‚¹ä¸Šä¸èƒ½æœ‰é‡å¤çš„ä¸»æœºåã€MAC åœ°å€æˆ– product_uuidï¼Œè¯·å‚é˜…<a href=#verify-mac-address target=_blank>ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ä¸Š MAC åœ°å€å’Œ product_uuid çš„å”¯ä¸€æ€§</a>ã€‚</li>
<li>å¼€å¯ä¸»æœºä¸Šçš„æŸäº›ç«¯å£ï¼Œè¯·å‚é˜…<a href=#check-required-ports target=_blank>æ£€æŸ¥æ‰€éœ€ç«¯å£</a>ã€‚</li>
<li>ç¦ç”¨äº¤æ¢åˆ†åŒºã€‚ä¸ºäº†ä¿è¯ kubelet æ­£å¸¸å·¥ä½œï¼Œæ‚¨<strong>å¿…é¡»</strong>ç¦ç”¨äº¤æ¢åˆ†åŒºã€‚</li>
</ul>
<h2 id=verify-mac-address>ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ä¸Š MAC åœ°å€å’Œ product_uuid çš„å”¯ä¸€æ€§ </h2>
<ul>
<li>ä½¿ç”¨å‘½ä»¤ <code>ip link</code> æˆ– <code>ifconfig -a</code> æ¥è·å–ç½‘ç»œæ¥å£çš„ MAC åœ°å€</li>
<li>ä½¿ç”¨ <code>sudo cat /sys/class/dmi/id/product_uuid</code> å‘½ä»¤æ¥æ ¡éªŒ product_uuid</li>
</ul>
<p>ä¸€èˆ¬æ¥è®²ï¼Œç¡¬ä»¶è®¾å¤‡æ‹¥æœ‰å”¯ä¸€çš„åœ°å€ï¼Œä½†æ˜¯æœ‰äº›è™šæ‹Ÿæœºçš„åœ°å€å¯èƒ½ä¼šé‡å¤ã€‚
Kubernetes ä½¿ç”¨ MAC åœ°å€å’Œ product_uuid æ¥ç¡®å®šé›†ç¾¤ä¸­çš„å”¯ä¸€èŠ‚ç‚¹ã€‚
å¦‚æœè¿™äº›å€¼åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šä¸å”¯ä¸€ï¼Œå¯èƒ½ä¼šå¯¼è‡´å®‰è£…<a href=https://github.com/kubernetes/kubeadm/issues/31 target=_blank>å¤±è´¥</a>ã€‚</p>
<h2 id=æ£€æŸ¥ç½‘ç»œé€‚é…å™¨>æ£€æŸ¥ç½‘ç»œé€‚é…å™¨</h2>
<p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªä»¥ä¸Šçš„ç½‘ç»œé€‚é…å™¨ï¼ŒåŒæ—¶æ‚¨çš„ Kubernetes ç»„ä»¶é€šè¿‡é»˜è®¤è·¯ç”±ä¸å¯è¾¾ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨é¢„å…ˆæ·»åŠ  IP è·¯ç”±è§„åˆ™ï¼Œè¿™æ · Kubernetes é›†ç¾¤å°±å¯ä»¥é€šè¿‡å¯¹åº”çš„é€‚é…å™¨å®Œæˆè¿æ¥ã€‚</p>
<h2 id=å…è®¸-iptables-æ£€æŸ¥æ¡¥æ¥æµé‡>å…è®¸ iptables æ£€æŸ¥æ¡¥æ¥æµé‡</h2>
<p>ç¡®ä¿ <code>br_netfilter</code> æ¨¡å—è¢«åŠ è½½ã€‚è¿™ä¸€æ“ä½œå¯ä»¥é€šè¿‡è¿è¡Œ <code>lsmod | grep br_netfilter</code>
æ¥å®Œæˆã€‚è‹¥è¦æ˜¾å¼åŠ è½½è¯¥æ¨¡å—ï¼Œå¯æ‰§è¡Œå‘½ä»¤ <code>sudo modprobe br_netfilter</code>ã€‚</p>
<p>ä¸ºäº†è®©æ‚¨çš„ Linux èŠ‚ç‚¹ä¸Šçš„ iptables èƒ½å¤Ÿæ­£ç¡®åœ°æŸ¥çœ‹æ¡¥æ¥æµé‡ï¼Œæ‚¨éœ€è¦ç¡®ä¿åœ¨
<code>sysctl</code> é…ç½®ä¸­å°† <code>net.bridge.bridge-nf-call-iptables</code> è®¾ç½®ä¸º 1ã€‚ä¾‹å¦‚ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf
</span><span style=color:#4e9a06>br_netfilter
</span><span style=color:#4e9a06>EOF</span>

cat <span style=color:#4e9a06>&lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf
</span><span style=color:#4e9a06>net.bridge.bridge-nf-call-ip6tables = 1
</span><span style=color:#4e9a06>net.bridge.bridge-nf-call-iptables = 1
</span><span style=color:#4e9a06>EOF</span>
sudo sysctl --system
</code></pre></div><p>æ›´å¤šç»†èŠ‚è¯·æŸ¥é˜…<a href=https://kubernetes.io/zh/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/#network-plugin-requirements target=_blank>ç½‘ç»œæ’ä»¶éœ€æ±‚</a>é¡µé¢ã€‚</p>
<h2 id=check-required-ports>æ£€æŸ¥æ‰€éœ€ç«¯å£</h2>
<h3 id=æ§åˆ¶å¹³é¢èŠ‚ç‚¹>æ§åˆ¶å¹³é¢èŠ‚ç‚¹</h3>
<table>
<thead>
<tr>
<th>åè®®</th>
<th>æ–¹å‘</th>
<th>ç«¯å£èŒƒå›´</th>
<th>ä½œç”¨</th>
<th>ä½¿ç”¨è€…</th>
</tr>
</thead>
<tbody>
<tr>
<td>TCP</td>
<td>å…¥ç«™</td>
<td>6443</td>
<td>Kubernetes API æœåŠ¡å™¨</td>
<td>æ‰€æœ‰ç»„ä»¶</td>
</tr>
<tr>
<td>TCP</td>
<td>å…¥ç«™</td>
<td>2379-2380</td>
<td>etcd æœåŠ¡å™¨å®¢æˆ·ç«¯ API</td>
<td>kube-apiserverã€etcd</td>
</tr>
<tr>
<td>TCP</td>
<td>å…¥ç«™</td>
<td>10250</td>
<td>Kubelet API</td>
<td>kubelet è‡ªèº«ã€æ§åˆ¶å¹³é¢ç»„ä»¶</td>
</tr>
<tr>
<td>TCP</td>
<td>å…¥ç«™</td>
<td>10251</td>
<td>kube-scheduler</td>
<td>kube-scheduler è‡ªèº«</td>
</tr>
<tr>
<td>TCP</td>
<td>å…¥ç«™</td>
<td>10252</td>
<td>kube-controller-manager</td>
<td>kube-controller-manager è‡ªèº«</td>
</tr>
</tbody>
</table>
<h3 id=å·¥ä½œèŠ‚ç‚¹>å·¥ä½œèŠ‚ç‚¹</h3>
<table>
<thead>
<tr>
<th>åè®®</th>
<th>æ–¹å‘</th>
<th>ç«¯å£èŒƒå›´</th>
<th>ä½œç”¨</th>
<th>ä½¿ç”¨è€…</th>
</tr>
</thead>
<tbody>
<tr>
<td>TCP</td>
<td>å…¥ç«™</td>
<td>10250</td>
<td>Kubelet API</td>
<td>kubelet è‡ªèº«ã€æ§åˆ¶å¹³é¢ç»„ä»¶</td>
</tr>
<tr>
<td>TCP</td>
<td>å…¥ç«™</td>
<td>30000-32767</td>
<td>NodePort æœåŠ¡</td>
<td>æ‰€æœ‰ç»„ä»¶</td>
</tr>
</tbody>
</table>
<p>ä»¥ä¸Šæ˜¯ <a href=https://kubernetes.io/zh/docs/concepts/services-networking/service/ target=_blank>NodePort æœåŠ¡</a>çš„é»˜è®¤ç«¯å£èŒƒå›´ã€‚</p>
<p>ä½¿ç”¨ * æ ‡è®°çš„ä»»æ„ç«¯å£å·éƒ½å¯ä»¥è¢«è¦†ç›–ï¼Œæ‰€ä»¥æ‚¨éœ€è¦ä¿è¯å®šåˆ¶çš„ç«¯å£æ˜¯å¼€æ”¾çš„ã€‚</p>
<p>è™½ç„¶æ§åˆ¶å¹³é¢èŠ‚ç‚¹å·²ç»åŒ…å«äº† etcd çš„ç«¯å£ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„å¤–éƒ¨ etcd é›†ç¾¤ï¼Œæˆ–æŒ‡å®šè‡ªå®šä¹‰ç«¯å£ã€‚</p>
<p>æ‚¨ä½¿ç”¨çš„ Pod ç½‘ç»œæ’ä»¶ (è§ä¸‹) ä¹Ÿå¯èƒ½éœ€è¦æŸäº›ç‰¹å®šç«¯å£å¼€å¯ã€‚ç”±äºå„ä¸ª Pod ç½‘ç»œæ’ä»¶éƒ½æœ‰æ‰€ä¸åŒï¼Œè¯·å‚é˜…ç›¸åº”æ–‡æ¡£ä¸­çš„ç«¯å£è¦æ±‚ã€‚</p>
<h2 id=è®¾ç½®èŠ‚ç‚¹åå­—>è®¾ç½®èŠ‚ç‚¹åå­—</h2>
<p>å‘½ä»¤çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hostnamectl set-hostname your-new-host-name
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;127.0.0.1 </span><span style=color:#204a87;font-weight:700>$(</span>hostname<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span> &gt;&gt; /etc/hosts
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;::1       </span><span style=color:#204a87;font-weight:700>$(</span>hostname<span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span> &gt;&gt; /etc/hosts
</code></pre></div><h2 id=å…³é—­-swap>å…³é—­ Swap</h2>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…³é—­ Swapï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>swapoff -a
</code></pre></div><p>å¦‚æœéœ€è¦æ°¸ä¹…å…³é—­ï¼Œè¯·ç¼–è¾‘ <code>/etc/fstab</code> æ–‡ä»¶ï¼Œå°† swap çš„æŒ‚è½½è·¯å¾„æ”¹ä¸ºæ³¨é‡Šã€‚</p>
<h2 id=å…³é—­-selinux>å…³é—­ Selinux</h2>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…³é—­ Selinuxï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>setenforce <span style=color:#0000cf;font-weight:700>0</span>
</code></pre></div><p>å¦‚æœéœ€è¦æ°¸ä¹…å…³é—­ï¼Œè¯·ç¼–è¾‘ <code>/etc/sysconfig/selinux</code> å°† <code>SELINUX=enforcing</code> æ›¿æ¢ä¸º <code>SELINUX=disabled</code>ã€‚</p>
<h2 id=installing-runtime>å®‰è£… runtime</h2>
<p>ä¸ºäº†åœ¨ Pod ä¸­è¿è¡Œå®¹å™¨ï¼ŒKubernetes ä½¿ç”¨å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer Runtimeï¼‰ã€‚</p>
<ul class="nav nav-tabs" id=container-runtimes role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#container-runtimes-0 role=tab aria-controls=container-runtimes-0 aria-selected=true>Linux èŠ‚ç‚¹</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#container-runtimes-1 role=tab aria-controls=container-runtimes-1>å…¶å®ƒæ“ä½œç³»ç»Ÿ</a></li></ul>
<div class=tab-content id=container-runtimes><div id=container-runtimes-0 class="tab-pane show active" role=tabpanel aria-labelledby=container-runtimes-0>
<p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes ä½¿ç”¨å®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼ˆContainer Runtime Interfaceï¼ŒCRIï¼‰æ¥ä¸æ‚¨æ‰€é€‰æ‹©çš„å®¹å™¨è¿è¡Œæ—¶äº¤äº’ã€‚</p>
<p>å¦‚æœæ‚¨ä¸æŒ‡å®šè¿è¡Œæ—¶ï¼Œåˆ™ kubeadm ä¼šè‡ªåŠ¨å°è¯•æ£€æµ‹ç³»ç»Ÿä¸Šå·²ç»å®‰è£…çš„è¿è¡Œæ—¶ï¼Œæ–¹æ³•æ˜¯æ‰«æä¸€ç»„ä¼—æ‰€å‘¨çŸ¥çš„ Unix åŸŸå¥—æ¥å­—ã€‚</p>
<p>ä¸‹é¢çš„è¡¨æ ¼åˆ—ä¸¾äº†ä¸€äº›å®¹å™¨è¿è¡Œæ—¶åŠå…¶å¯¹åº”çš„å¥—æ¥å­—è·¯å¾„ï¼š</p>
<table>
<thead>
<tr>
<th>è¿è¡Œæ—¶</th>
<th>åŸŸå¥—æ¥å­—</th>
</tr>
</thead>
<tbody>
<tr>
<td>Docker</td>
<td>/var/run/dockershim.sock</td>
</tr>
<tr>
<td>Containerd</td>
<td>/run/containerd/containerd.sock</td>
</tr>
<tr>
<td>CRI-O</td>
<td>/var/run/crio/crio.sock</td>
</tr>
</tbody>
</table>
<br>
å¦‚æœåŒæ—¶æ£€æµ‹åˆ° Docker å’Œ Containerdï¼Œåˆ™ä¼˜å…ˆé€‰æ‹© Dockerã€‚
è¿™æ˜¯å¿…ç„¶çš„ï¼Œå³ä½¿æ‚¨ä»…å®‰è£…äº† Dockerï¼Œå› ä¸º Docker 18.09 é™„å¸¦äº† Containerdï¼Œæ‰€ä»¥ä¸¤è€…éƒ½æ˜¯å¯ä»¥æ£€æµ‹åˆ°çš„ã€‚
å¦‚æœæ£€æµ‹åˆ°å…¶ä»–ä¸¤ä¸ªæˆ–å¤šä¸ªè¿è¡Œæ—¶ï¼Œåˆ™ kubeadm è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶é€€å‡ºã€‚
<p>kubelet é€šè¿‡å†…ç½®çš„ <code>dockershim</code> CRI å®ç°ä¸ Docker é›†æˆã€‚</p>
</div>
<div id=container-runtimes-1 class=tab-pane role=tabpanel aria-labelledby=container-runtimes-1>
<p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ kubeadm ä½¿ç”¨ docker ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ã€‚kubelet é€šè¿‡å†…ç½®çš„ <code>dockershim</code> CRI å®ç°ä¸ Docker é›†æˆã€‚</p>
</div></div>
<ul class="nav nav-tabs" id=tabset-zhdocspre-install-3 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocspre-install-3-0 role=tab aria-controls=tabset-zhdocspre-install-3-0 aria-selected=true>Docker</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocspre-install-3-1 role=tab aria-controls=tabset-zhdocspre-install-3-1>Containerd</a></li></ul>
<div class=tab-content id=tabset-zhdocspre-install-3><div id=tabset-zhdocspre-install-3-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocspre-install-3-0>
<p>
<ul class="nav nav-tabs" id=tabset-zhdocspre-install-2 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocspre-install-2-0 role=tab aria-controls=tabset-zhdocspre-install-2-0 aria-selected=true>åŸºäº Red Hat çš„å‘è¡Œç‰ˆ</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocspre-install-2-1 role=tab aria-controls=tabset-zhdocspre-install-2-1>åŸºäº Debian çš„å‘è¡Œç‰ˆ</a></li></ul>
<div class=tab-content id=tabset-zhdocspre-install-2><div id=tabset-zhdocspre-install-2-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocspre-install-2-0>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…åŸºäº Red Hat å‘è¡Œç‰ˆçš„ Dockerï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install docker
</code></pre></div></div>
<div id=tabset-zhdocspre-install-2-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocspre-install-2-1>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…åŸºäº Debian å‘è¡Œç‰ˆçš„ Dockerï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>apt-get install docker.io
</code></pre></div></div></div>
</div>
<div id=tabset-zhdocspre-install-3-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocspre-install-3-1>
<p><p>Containerd å®˜æ–¹é»˜è®¤åªæä¾› amd64 æ¶æ„çš„ä¸‹è½½åŒ…ï¼Œå¦‚æœæ‚¨é‡‡ç”¨çš„æ˜¯å…¶ä»–åŸºç¡€æ¶æ„ï¼Œ
å¯ä»¥ä» Docker å®˜æ–¹ä»“åº“å®‰è£… <code>containerd.io</code> è½¯ä»¶åŒ…ã€‚åœ¨<a href=https://docs.docker.com/engine/install/#server target=_blank>å®‰è£… Docker å¼•æ“</a>ä¸­
æ‰¾åˆ°ä¸ºå„è‡ªçš„ Linux å‘è¡Œç‰ˆè®¾ç½® Docker å­˜å‚¨åº“å’Œå®‰è£… containerd.io è½¯ä»¶åŒ…çš„æœ‰å…³è¯´æ˜ã€‚</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æºä»£ç æ„å»ºã€‚</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.5.4
wget -c https://github.com/containerd/containerd/releases/download/v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>/containerd-<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>-linux-amd64.tar.gz
tar xvf containerd-<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>-linux-amd64.tar.gz -C /usr/local/
mkdir /etc/containerd/ <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> containerd config default &gt; /etc/containerd/config.toml
wget -c -O /etc/systemd/system/containerd.service https://raw.githubusercontent.com/containerd/containerd/main/containerd.service
systemctl start containerd <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> systemctl <span style=color:#204a87>enable</span> containerd
</code></pre></div></div></div>
<p>å‚é˜…<a href=https://kubernetes.io/zh/docs/setup/production-environment/container-runtimes/ target=_blank>å®¹å™¨è¿è¡Œæ—¶</a>ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-64407d3e6d5ef382426bdfbcae040c6a>3 - æ­£å¸¸å®‰è£…</h1>
<p>KLTS æä¾›äº†åŸºäº deb å’Œ rpm è½¯ä»¶æºçš„å®‰è£…æ–¹å¼ï¼Œæ‚¨å¯ä»¥é€‰æ‹©é€‚åˆçš„å®‰è£…æ–¹å¼ã€‚</p>
<p>å®‰è£…å‰è¯·ç¡®è®¤å·²ç»å®Œæˆäº†<a href=/zh/docs/pre-install target>å‡†å¤‡</a>å·¥ä½œã€‚</p>
<h2 id=è®¾ç½®-klts-è½¯ä»¶æº>è®¾ç½® KLTS è½¯ä»¶æº</h2>
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-3 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-3-0 role=tab aria-controls=tabset-zhdocsinstall-3-0 aria-selected=true>åŸºäº Red Hat çš„å‘è¡Œç‰ˆ</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-3-1 role=tab aria-controls=tabset-zhdocsinstall-3-1>åŸºäº Debian çš„å‘è¡Œç‰ˆ</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-3-2 role=tab aria-controls=tabset-zhdocsinstall-3-2>åŸºäº Red Hat çš„å‘è¡Œç‰ˆ, å›½å†…åŠ é€Ÿ ğŸš€</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-3-3 role=tab aria-controls=tabset-zhdocsinstall-3-3>åŸºäº Debian çš„å‘è¡Œç‰ˆ, å›½å†…åŠ é€Ÿ ğŸš€</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-3><div id=tabset-zhdocsinstall-3-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-3-0>
<p><p>æ‰§è¡Œä»¥ä¸‹ä»£ç è®¾ç½®ä¸‹è½½ KLTS çš„è½¯ä»¶æºï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; \EOF &gt; /etc/yum.repos.d/klts.repo
</span><span style=color:#4e9a06>[klts]
</span><span style=color:#4e9a06>name=klts
</span><span style=color:#4e9a06>baseurl=https://dl.klts.io/rpm/$basearch/
</span><span style=color:#4e9a06>enabled=1
</span><span style=color:#4e9a06>gpgcheck=0
</span><span style=color:#4e9a06>EOF</span>

yum makecache
</code></pre></div></div>
<div id=tabset-zhdocsinstall-3-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-3-1>
<p><p>æ‰§è¡Œä»¥ä¸‹ä»£ç è®¾ç½®ä¸‹è½½ KLTS çš„è½¯ä»¶æºï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/klts.list
</span><span style=color:#4e9a06>deb [trusted=yes] https://dl.klts.io/deb stable main
</span><span style=color:#4e9a06>EOF</span>

apt-get update
</code></pre></div></div>
<div id=tabset-zhdocsinstall-3-2 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-3-2>
<p>
<strong>è¯´æ˜ï¼š</strong>ä»¥ä¸‹åŠ é€Ÿå‡æ¥è‡ªç¬¬ä¸‰æ–¹, å®‰å…¨å’Œç¨³å®šæ€§ä¸åšä¿éšœ, ä»…å»ºè®®æµ‹è¯•ç¯å¢ƒä½¿ç”¨ â—ï¸â—ï¸â—ï¸ <br><br>
æ‰§è¡Œä»¥ä¸‹ä»£ç è®¾ç½®ä¸‹è½½ KLTS çš„è½¯ä»¶æºï¼š
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-1-0 role=tab aria-controls=tabset-zhdocsinstall-1-0 aria-selected=true>/etc/hosts</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-1-1 role=tab aria-controls=tabset-zhdocsinstall-1-1>hub.fastgit.org</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-1-2 role=tab aria-controls=tabset-zhdocsinstall-1-2>ghproxy.com</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-1-3 role=tab aria-controls=tabset-zhdocsinstall-1-3>raw.githubusercontents.com</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-1-4 role=tab aria-controls=tabset-zhdocsinstall-1-4>raw.staticdn.net</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-1><div id=tabset-zhdocsinstall-1-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-1-0>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl https://raw.githubusercontent.com/wzshiming/github-hosts/master/hosts &gt;&gt;/etc/hosts

cat <span style=color:#4e9a06>&lt;&lt; \EOF &gt; /etc/yum.repos.d/klts.repo
</span><span style=color:#4e9a06>[klts]
</span><span style=color:#4e9a06>name=klts
</span><span style=color:#4e9a06>baseurl=https://dl.klts.io/rpm/$basearch/
</span><span style=color:#4e9a06>enabled=1
</span><span style=color:#4e9a06>gpgcheck=0
</span><span style=color:#4e9a06>EOF</span>

yum makecache
</code></pre></div></div>
<div id=tabset-zhdocsinstall-1-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-1-1>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; \EOF &gt; /etc/yum.repos.d/klts.repo
</span><span style=color:#4e9a06>[klts]
</span><span style=color:#4e9a06>name=klts
</span><span style=color:#4e9a06>baseurl=https://hub.fastgit.org/klts-io/kubernetes-lts/raw/repos/rpm/$basearch/
</span><span style=color:#4e9a06>enabled=1
</span><span style=color:#4e9a06>gpgcheck=0
</span><span style=color:#4e9a06>EOF</span>

yum makecache
</code></pre></div></div>
<div id=tabset-zhdocsinstall-1-2 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-1-2>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; \EOF &gt; /etc/yum.repos.d/klts.repo
</span><span style=color:#4e9a06>[klts]
</span><span style=color:#4e9a06>name=klts
</span><span style=color:#4e9a06>baseurl=https://ghproxy.com/https://raw.githubusercontent.com/klts-io/kubernetes-lts/repos/rpm/$basearch/
</span><span style=color:#4e9a06>enabled=1
</span><span style=color:#4e9a06>gpgcheck=0
</span><span style=color:#4e9a06>EOF</span>

yum makecache
</code></pre></div></div>
<div id=tabset-zhdocsinstall-1-3 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-1-3>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; \EOF &gt; /etc/yum.repos.d/klts.repo
</span><span style=color:#4e9a06>[klts]
</span><span style=color:#4e9a06>name=klts
</span><span style=color:#4e9a06>baseurl=https://raw.githubusercontents.com/klts-io/kubernetes-lts/repos/rpm/$basearch/
</span><span style=color:#4e9a06>enabled=1
</span><span style=color:#4e9a06>gpgcheck=0
</span><span style=color:#4e9a06>EOF</span>

yum makecache
</code></pre></div></div>
<div id=tabset-zhdocsinstall-1-4 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-1-4>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; \EOF &gt; /etc/yum.repos.d/klts.repo
</span><span style=color:#4e9a06>[klts]
</span><span style=color:#4e9a06>name=klts
</span><span style=color:#4e9a06>baseurl=https://raw.staticdn.net/klts-io/kubernetes-lts/repos/rpm/$basearch/
</span><span style=color:#4e9a06>enabled=1
</span><span style=color:#4e9a06>gpgcheck=0
</span><span style=color:#4e9a06>EOF</span>

yum makecache
</code></pre></div></div></div>
</div>
<div id=tabset-zhdocsinstall-3-3 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-3-3>
<p>
<strong>è¯´æ˜ï¼š</strong>ä»¥ä¸‹åŠ é€Ÿå‡æ¥è‡ªç¬¬ä¸‰æ–¹, å®‰å…¨å’Œç¨³å®šæ€§ä¸åšä¿éšœ, ä»…å»ºè®®æµ‹è¯•ç¯å¢ƒä½¿ç”¨ â—ï¸â—ï¸â—ï¸<br><br>
æ‰§è¡Œä»¥ä¸‹ä»£ç è®¾ç½®ä¸‹è½½ KLTS çš„è½¯ä»¶æºï¼š
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-2 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-2-0 role=tab aria-controls=tabset-zhdocsinstall-2-0 aria-selected=true>/etc/hosts</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-2-1 role=tab aria-controls=tabset-zhdocsinstall-2-1>hub.fastgit.org</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-2-2 role=tab aria-controls=tabset-zhdocsinstall-2-2>ghproxy.com</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-2-3 role=tab aria-controls=tabset-zhdocsinstall-2-3>raw.githubusercontents.com</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-2-4 role=tab aria-controls=tabset-zhdocsinstall-2-4>raw.staticdn.net</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-2><div id=tabset-zhdocsinstall-2-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-2-0>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl https://raw.githubusercontent.com/wzshiming/github-hosts/master/hosts &gt;&gt;/etc/hosts

cat <span style=color:#4e9a06>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/klts.list
</span><span style=color:#4e9a06>deb [trusted=yes] https://dl.klts.io/deb stable main
</span><span style=color:#4e9a06>EOF</span>

apt-get update
</code></pre></div></div>
<div id=tabset-zhdocsinstall-2-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-2-1>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/klts.list
</span><span style=color:#4e9a06>deb [trusted=yes] https://hub.fastgit.org/klts-io/kubernetes-lts/raw/repos/deb stable main
</span><span style=color:#4e9a06>EOF</span>

apt-get update
</code></pre></div></div>
<div id=tabset-zhdocsinstall-2-2 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-2-2>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/klts.list
</span><span style=color:#4e9a06>deb [trusted=yes] https://ghproxy.com/https://raw.githubusercontent.com/klts-io/kubernetes-lts/repos/deb stable main
</span><span style=color:#4e9a06>EOF</span>

apt-get update
</code></pre></div></div>
<div id=tabset-zhdocsinstall-2-3 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-2-3>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/klts.list
</span><span style=color:#4e9a06>deb [trusted=yes] https://raw.githubusercontents.com/klts-io/kubernetes-lts/repos/deb stable main
</span><span style=color:#4e9a06>EOF</span>

apt-get update
</code></pre></div></div>
<div id=tabset-zhdocsinstall-2-4 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-2-4>
<p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat <span style=color:#4e9a06>&lt;&lt; EOF &gt; /etc/apt/sources.list.d/klts.list
</span><span style=color:#4e9a06>deb [trusted=yes] https://raw.staticdn.net/klts-io/kubernetes-lts/repos/deb stable main
</span><span style=color:#4e9a06>EOF</span>

apt-get update
</code></pre></div></div></div>
</div></div>
<h2 id=å®‰è£…>å®‰è£…</h2>
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-6 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-6-0 role=tab aria-controls=tabset-zhdocsinstall-6-0 aria-selected=true>å®‰è£…æœ€é«˜ç‰ˆæœ¬</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-6-1 role=tab aria-controls=tabset-zhdocsinstall-6-1>å®‰è£…æŒ‡å®šç‰ˆæœ¬</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-6><div id=tabset-zhdocsinstall-6-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-6-0>
<p>
<br>è¿™é‡Œçš„æœ€é«˜ç‰ˆæœ¬æŒ‡çš„æ˜¯ KLTS ç»´æŠ¤çš„æœ€é«˜ç‰ˆæœ¬ã€‚
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-4 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-4-0 role=tab aria-controls=tabset-zhdocsinstall-4-0 aria-selected=true>åŸºäº Red Hat çš„å‘è¡Œç‰ˆ</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-4-1 role=tab aria-controls=tabset-zhdocsinstall-4-1>åŸºäº Debian çš„å‘è¡Œç‰ˆ</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-4><div id=tabset-zhdocsinstall-4-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-4-0>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… KLTS å½“å‰ç»´æŠ¤çš„æœ€é«˜ç‰ˆæœ¬çš„ Kubernetesï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install kubeadm kubelet kubectl
</code></pre></div></div>
<div id=tabset-zhdocsinstall-4-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-4-1>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… KLTS å½“å‰ç»´æŠ¤çš„æœ€é«˜ç‰ˆæœ¬çš„ Kubernetesï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>apt-get install kubeadm kubelet kubectl
</code></pre></div></div></div>
</div>
<div id=tabset-zhdocsinstall-6-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-6-1>
<p>
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-5 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-5-0 role=tab aria-controls=tabset-zhdocsinstall-5-0 aria-selected=true>åŸºäº Red Hat çš„å‘è¡Œç‰ˆ</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-5-1 role=tab aria-controls=tabset-zhdocsinstall-5-1>åŸºäº Debian çš„å‘è¡Œç‰ˆ</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-5><div id=tabset-zhdocsinstall-5-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-5-0>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Kubernetesï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># æœç´¢æ”¯æŒçš„ç‰ˆæœ¬</span>
yum search kubeadm --showduplicates <span style=color:#000;font-weight:700>|</span> grep kubeadm-

<span style=color:#8f5902;font-style:italic># å®‰è£…</span>
<span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.2
yum install kubeadm-v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> kubelet-v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> kubectl-v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div>
<div id=tabset-zhdocsinstall-5-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-5-1>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Kubernetesï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># æœç´¢æ”¯æŒçš„ç‰ˆæœ¬</span>
apt-cache show kubeadm <span style=color:#000;font-weight:700>|</span> grep Version

<span style=color:#8f5902;font-style:italic># å®‰è£…</span>
<span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.2
apt-get install <span style=color:#000>kubeadm</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> <span style=color:#000>kubelet</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span> <span style=color:#000>kubectl</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div></div>
</div></div>
<h2 id=å¼€æœºè‡ªåŠ¨å¯åŠ¨-kubelet>å¼€æœºè‡ªåŠ¨å¯åŠ¨ Kubelet</h2>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€æœºè‡ªåŠ¨å¯åŠ¨ Kubeletï¼š</p>
<pre><code>systemctl enable kubelet
</code></pre><h2 id=æ‹‰å–ä¾èµ–é•œåƒ>æ‹‰å–ä¾èµ–é•œåƒ</h2>
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-7 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-7-0 role=tab aria-controls=tabset-zhdocsinstall-7-0 aria-selected=true>é»˜è®¤</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-7-1 role=tab aria-controls=tabset-zhdocsinstall-7-1>å›½å†…åŠ é€Ÿ ğŸš€</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-7><div id=tabset-zhdocsinstall-7-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-7-0>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ pull ä¾èµ–çš„é•œåƒï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.2
<span style=color:#000>REPOS</span><span style=color:#ce5c00;font-weight:700>=</span>ghcr.io/klts-io/kubernetes-lts
kubeadm config images pull --image-repository <span style=color:#4e9a06>${</span><span style=color:#000>REPOS</span><span style=color:#4e9a06>}</span> --kubernetes-version v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div>
<div id=tabset-zhdocsinstall-7-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-7-1>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ pull ä¾èµ–çš„é•œåƒï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.2
<span style=color:#000>REPOS</span><span style=color:#ce5c00;font-weight:700>=</span>ghcr.m.daocloud.io/klts-io/kubernetes-lts
kubeadm config images pull --image-repository <span style=color:#4e9a06>${</span><span style=color:#000>REPOS</span><span style=color:#4e9a06>}</span> --kubernetes-version v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div></div>
<p>åç»­å¯¹ kubeadm çš„æ“ä½œéƒ½éœ€è¦åŠ ä¸Š <code>--image-repository</code> å’Œ <code>--kubernetes-version</code> ä»¥ä¸»åŠ¨æŒ‡å®šé•œåƒã€‚</p>
<h2 id=åˆå§‹åŒ–æ§åˆ¶é¢èŠ‚ç‚¹>åˆå§‹åŒ–æ§åˆ¶é¢èŠ‚ç‚¹</h2>
<ul class="nav nav-tabs" id=tabset-zhdocsinstall-8 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsinstall-8-0 role=tab aria-controls=tabset-zhdocsinstall-8-0 aria-selected=true>é»˜è®¤</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsinstall-8-1 role=tab aria-controls=tabset-zhdocsinstall-8-1>å›½å†…åŠ é€Ÿ ğŸš€</a></li></ul>
<div class=tab-content id=tabset-zhdocsinstall-8><div id=tabset-zhdocsinstall-8-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsinstall-8-0>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æ§åˆ¶é¢çš„èŠ‚ç‚¹ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.2
<span style=color:#000>REPOS</span><span style=color:#ce5c00;font-weight:700>=</span>ghcr.io/klts-io/kubernetes-lts
kubeadm init --image-repository <span style=color:#4e9a06>${</span><span style=color:#000>REPOS</span><span style=color:#4e9a06>}</span> --kubernetes-version v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div>
<div id=tabset-zhdocsinstall-8-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsinstall-8-1>
<p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–æ§åˆ¶é¢çš„èŠ‚ç‚¹ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>VERSION</span><span style=color:#ce5c00;font-weight:700>=</span>1.18.20-lts.2
<span style=color:#000>REPOS</span><span style=color:#ce5c00;font-weight:700>=</span>ghcr.m.daocloud.io/klts-io/kubernetes-lts
kubeadm init --image-repository <span style=color:#4e9a06>${</span><span style=color:#000>REPOS</span><span style=color:#4e9a06>}</span> --kubernetes-version v<span style=color:#4e9a06>${</span><span style=color:#000>VERSION</span><span style=color:#4e9a06>}</span>
</code></pre></div></div></div>
<p>æœ‰å…³æ›´å¤šå®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜… <a href=https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/ target=_blank>Kubernetes æ“ä½œæŒ‡å—</a>ã€‚</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c170895d2a643e556fcae1338dee8dce>4 - è„šæœ¬ä¸€é”®å®‰è£…</h1>
<p>KLTS æä¾›äº†ä»¥ä¸‹è„šæœ¬è‡ªåŠ¨å®Œæˆå®‰è£…æµç¨‹ã€‚</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget https://github.com/klts-io/klts/raw/main/install.sh
chmod +x install.sh
./install.sh
</code></pre></div><pre><code class=language-console data-lang=console>Usage: ./install.sh [OPTIONS]
  -h, --help : Display this help and exit
  --kubernetes-container-registry=ghcr.io/klts-io/kubernetes-lts : Kubernetes container registry
  --kubernetes-version=1.18.20-lts.1 : Kubernetes version to install
  --containerd-version=1.3.10-lts.0 : Containerd version to install
  --runc-version=1.0.2-lts.0 : Runc version to install
  --kubernetes-rpm-source=https://github.com/klts-io/kubernetes-lts/raw/rpm-v1.18.20-lts.2 : Kubernetes RPM source
  --containerd-rpm-source=https://github.com/klts-io/containerd-lts/raw/rpm-v1.3.10-lts.0 : Containerd RPM source
  --runc-rpm-source=https://github.com/klts-io/runc-lts/raw/rpm-v1.0.2-lts.0 : Runc RPM source
  --others-rpm-source=https://github.com/klts-io/others/raw/rpm : Other RPM source
  --kubernetes-deb-source=https://github.com/klts-io/kubernetes-lts/raw/deb-v1.18.20-lts.2 : Kubernetes DEB source
  --containerd-deb-source=https://github.com/klts-io/containerd-lts/raw/deb-v1.3.10-lts.0 : Containerd DEB source
  --runc-deb-source=https://github.com/klts-io/runc-lts/raw/deb-v1.0.2-lts.0 : Runc DEB source
  --others-deb-source=https://github.com/klts-io/others/raw/deb : Other DEB source
  --focus=enable-iptables-discover-bridged-traffic,disable-swap,disable-selinux,setup-source,install-kubernetes,install-containerd,install-runc,install-crictl,install-cniplugins,setup-crictl-config,setup-containerd-cni-config,setup-kubelet-config,setup-containerd-config,daemon-reload,start-containerd,status-containerd,enable-containerd,start-kubelet,status-kubelet,enable-kubelet,images-pull,control-plane-init,status-nodes,show-join-command : Focus on specific step
  --skip='' : Skip on specific step
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-cf1a7e96c5bc452942429f7b1a8d0306>5 - ä¿®å¤çš„æ¼æ´</h1>
</div>
<div class=td-content>
<h1 id=pg-be897afcde62036b99d0be161d71d482>5.1 - CVE-2021-25741</h1>
<a href=https://www.cvedetails.com/cve/CVE-2021-25741/ target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>è¿™æ˜¯ä¸€ä¸ªæƒé™è®¿é—®ç›¸å…³çš„å·å®‰å…¨æ€§é—®é¢˜ã€‚ç”¨æˆ·å¯ä»¥åœ¨åˆ›å»ºçš„å®¹å™¨ä¸­é€šè¿‡ <code>subpath</code> çš„å·æŒ‚è½½æ–¹å¼è®¿é—®åˆ°è¯¥å·æŒ‚è½½ç›®å½•ä¹‹å¤–çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>è¯¥æ¼æ´å½±å“ <code>kubelet</code> ç›¸å…³è¡Œä¸ºï¼Œå¯¹äºä¸¥æ ¼é™åˆ¶ <code>hostPath</code> åˆ›å»ºè¡Œä¸ºçš„é›†ç¾¤ç®¡ç†å‘˜æ¥è¯´é—®é¢˜å°¤ä¸ºä¸¥é‡ã€‚</p>
<h3 id=cvss>æ¼æ´è¯„åˆ†</h3>
<p>è¯¥æ¼æ´ä¸ºä¸­å±æ¼æ´ï¼Œ <code>CVSS</code> è¯„åˆ†ä¸º 5.5ã€‚</p>
<h2 id=prevention>é˜²èŒƒæªæ–½</h2>
<p>å¯¹äºä¸æƒ³å‡çº§ <code>kubelet</code> çš„ç”¨æˆ·æ¥è¯´ï¼Œå¯ä»¥æœ‰ä¸¤ç§é˜²èŒƒæªæ–½ï¼š</p>
<ul>
<li>ç¦æ­¢ <code>kubelet</code>ï¼Œ<code>kube-apiserver</code> çš„ <code>VolumeSubpath</code> åŠŸèƒ½ï¼Œå¹¶ä¸”ç§»é™¤æ‰€æœ‰æ­£åœ¨ä½¿ç”¨è¯¥åŠŸèƒ½çš„ <code>pod</code>ã€‚</li>
<li>ä½¿ç”¨ <code>admission control</code> é˜²æ­¢ä¿¡ä»»åº¦è¾ƒä½çš„ç”¨æˆ·ä½¿ç”¨ <code>root</code> æƒé™è¿è¡Œå®¹å™¨ã€‚</li>
</ul>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.22.2</li>
<li>v1.21.5</li>
<li>v1.20.11</li>
<li>v1.19.15</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.18/v1.18.20-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.18.20 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.18.20-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/104253.patch target=_blank>kubernetes/kubernetes#104253</a></li>
<li><a href=/zh/docs/releases/v1.17/v1.17.17-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.17.17 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.17.17-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.16/v1.16.15-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.16.15 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.16.15-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.15/v1.15.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.15.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.15.12-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.14/v1.14.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.14.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.14.10-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.13/v1.13.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.13.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.13.12-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> TODO</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d4317cf8912bca37373fe5558d2d6285>5.2 - CVE-2021-3121</h1>
<a href=https://www.cvedetails.com/cve/CVE-2021-3121 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p><code>Kubernetes</code> ç³»ç»Ÿç»„ä»¶ç”±äºè‡ªèº«æœ‰åº”å¯¹å´©æºƒçš„æ¢å¤æœºåˆ¶ï¼Œå½“é‡åˆ°æ¶æ„æäº¤çš„ <code>Protobuf</code> æ¶ˆæ¯æ—¶ä¸ä¼šä¸­æ–­æœåŠ¡ï¼Œæ‰€ä»¥ä¸åœ¨è¯¥æ¼æ´çš„å½±å“èŒƒå›´å†…ã€‚</p>
<p>åœ¨åº”ç”¨ç³»ç»Ÿä¸­ç¨‹åºæ¥æ”¶å¤„ç† <code>Protobuf</code> æ¶ˆæ¯æ—¶ï¼Œå¦‚æœç»„ä»¶æ²¡æœ‰åº”å¯¹å´©æºƒçš„æ¢å¤æœºåˆ¶ï¼Œé‚£ä¹ˆè¿™ç±»ç¨‹åºéƒ½åœ¨è¯¥æ¼æ´å½±å“èŒƒå›´å†…ï¼Œä¸”è¢«æ¶æ„æ”»å‡»æ—¶æœåŠ¡å¯èƒ½ä¼šä¸­æ–­ã€‚</p>
<p><code>Kubernetes</code> ç¤¾åŒºç»è¿‡æµ‹è¯•éªŒè¯ <code>API Server</code> ä¸å—è¯¥æ¼æ´çš„å½±å“ï¼Œä½†ä¸ºäº†é¿å…æ‚¨å—åˆ°è¯¥å®‰å…¨æ¼æ´éšæ‚£çš„å½±å“ï¼Œç¤¾åŒºå¯¹ç›¸å…³ <code>Protobuf</code> æ–‡ä»¶è¿›è¡Œäº†å‡çº§ã€‚</p>
<h2 id=prevention>é˜²èŒƒæªæ–½</h2>
<p>å¦‚æœåœ¨æ‚¨çš„åº”ç”¨ç³»ç»Ÿä»£ç ä¸­ä½¿ç”¨äº†è‡ªåŠ¨ç”Ÿæˆçš„ <code>Protobuf</code> æ¶ˆæ¯ï¼Œå¹¶ä¸”å‘ç°ç›¸å…³ç»„ä»¶å› ä¸ºä»¥ä¸‹å¼‚å¸¸é€€å‡ºï¼Œåˆ™å¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p>
<pre><code>panic: runtime error: index out of range [-9223372036854775804]

goroutine 1 [running]:

v1.(*MessageName).Unmarshal(0xc00006f1e8, 0xc0000281a8, 0xa, 0x10, 0xc00006f1b8, 0x1)

        .../protofile.pb.go:250 +0xb86
</code></pre><p>å¦‚æœæ‚¨ä½¿ç”¨äº† <code>Protobuf</code> æ¶ˆæ¯çš„ç›¸å…³ç»„ä»¶ï¼Œæ¨èå°† <code>Gogo Protobuf</code> ç¼–è¯‘å™¨å‡çº§åˆ°æ¼æ´ä¿®å¤ç‰ˆæœ¬ï¼ˆv1.3.2 æˆ–æ›´é«˜çš„ç‰ˆæœ¬ï¼‰ï¼Œå†åŸºäºå‡çº§åçš„ <code>Protobuf</code> ç¼–è¯‘å™¨é‡æ–°ç”Ÿæˆç›¸å…³çš„ <code>Protobuf</code> æ¶ˆæ¯ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.21.1</li>
<li>v1.20.7</li>
<li>v1.19.11</li>
<li>v1.18.19</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.17/v1.17.17-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.17.17 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.17.17-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
<li><a href=/zh/docs/releases/v1.16/v1.16.15-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.16.15 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.16.15-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
<li><a href=/zh/docs/releases/v1.15/v1.15.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.15.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.15.12-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
<li><a href=/zh/docs/releases/v1.14/v1.14.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.14.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.14.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
<li><a href=/zh/docs/releases/v1.13/v1.13.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.13.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.13.12-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/101327.patch target=_blank>kubernetes/kubernetes#101327</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ce240d314dc85c8ab698d26f1466e5a2>5.3 - CVE-2020-8559</h1>
<a href=https://www.cvedetails.com/cve/CVE-2020-8559 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>è¿™æ˜¯ <code>kube-apiserver</code> ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ <code>kubelet</code> çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>ç”±äº <code>kube-apiserver</code> åœ¨å‡çº§è¯·æ±‚çš„ä»£ç†åç«¯ä¸­å…è®¸å°†è¯·æ±‚ä¼ æ’­å›æºå®¢æˆ·ç«¯ï¼Œæ‰€ä»¥æ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ <code>kubelet</code> çš„å‡çº§è¯·æ±‚ï¼Œç„¶ååˆ©ç”¨è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆè¢«æ”»å‡»èŠ‚ç‚¹å‡ºç°æƒé™æå‡çš„æ¼æ´ã€‚</p>
<h3 id=cvss>æ¼æ´è¯„åˆ†</h3>
<p>è¯¥æ¼æ´ä¸ºä¸­å±æ¼æ´ï¼Œ <code>CVSS</code> è¯„åˆ†ä¸º 6.4ã€‚
å¦‚æœæœ‰å¤šä¸ªé›†ç¾¤å…±äº«ä½¿ç”¨äº†ç›¸åŒçš„ <code>CA</code> å’Œè®¤è¯å‡­è¯ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨æ­¤æ¼æ´æ”»å‡»å…¶ä»–é›†ç¾¤ï¼Œè¿™ç§æƒ…å†µä¸‹è¯¥æ¼æ´ä¸ºé«˜å±æ¼æ´ã€‚</p>
<h2 id=prevention>é˜²èŒƒæªæ–½</h2>
<p>å¯¹äºé›†ç¾¤å†…è·¨èŠ‚ç‚¹çš„æ”»å‡»ï¼Œå»ºè®®æ‚¨é‡‡å–ä»¥ä¸‹å®‰å…¨é˜²èŒƒæªæ–½ï¼š</p>
<ul>
<li>åŠæ—¶åŠé”€å¯èƒ½æ³„éœ²çš„ <code>kubeconfig</code> å‡­è¯ï¼Œå¹¶ä¸”éµå¾ªæƒé™æœ€å°åŒ–åŸåˆ™ï¼Œæ”¶æ•›å­è´¦å·ä¸å¿…è¦çš„ <code>pods/exec</code>ã€<code>pods/attach</code>ã€<code>pods/portforward</code> å’Œ <code>proxy</code> ç±»å‹çš„èµ„æºæ¨¡å‹ <code>RBAC</code> æƒé™ã€‚</li>
</ul>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.18.6</li>
<li>v1.17.9</li>
<li>v1.16.13</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.15/v1.15.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.15.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.15.12-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/92971.patch target=_blank>kubernetes/kubernetes#92971</a></li>
<li><a href=/zh/docs/releases/v1.14/v1.14.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.14.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.14.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/92971.patch target=_blank>kubernetes/kubernetes#92971</a></li>
<li><a href=/zh/docs/releases/v1.13/v1.13.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.13.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.13.12-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> TODO</li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> TODO</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-5aa68ad2e414f83fec8b9beb2250fdd3>5.4 - CVE-2020-8558</h1>
<a href=https://www.cvedetails.com/cve/CVE-2020-8558 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p><code>kube-proxy</code> ç»„ä»¶åœ¨ <code>iptables</code> å’Œ <code>ipvs</code> æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° <code>net.ipv4.conf.all.route_localnet=1</code>ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° <code>127.0.0.1</code> ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>å½“æ”»å‡»è€…æ‹¥æœ‰ä¸»æœºç½‘ç»œé…ç½®èƒ½åŠ›æˆ–è¿è¡Œåœ¨ä¸€ä¸ªå…·å¤‡äº† <code>CAP_NET_RAW</code> èƒ½åŠ›çš„å®¹å™¨å®ä¾‹æ—¶ï¼Œå°±å¯ä»¥è·å–åœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šç›‘å¬ <code>127.0.0.1</code> çš„æœåŠ¡ <code>socket</code> ä¿¡æ¯ã€‚å¦‚æœåœ¨ç›®æ ‡ä¸»æœºä¸Šå­˜åœ¨ <code>127.0.0.1</code> å¯ä»¥è®¿é—®ä¸”ä¸éœ€è¦ä»»ä½•è®¤è¯é‰´æƒçš„æš´éœ²æœåŠ¡ï¼Œé‚£ä¹ˆè¯¥æœåŠ¡ä¿¡æ¯å°±èƒ½è¢«æ”»å‡»è€…è·å–ã€‚</p>
<h3 id=cvss>æ¼æ´è¯„åˆ†</h3>
<ul>
<li>å¦‚æœé›†ç¾¤ <code>API Server</code> å¼€å¯äº†éè®¤è¯ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰ï¼Œé‚£ä¹ˆæ”»å‡»è€…å¯èƒ½è·å–åˆ° <code>API Server</code> æ¥å£ç›¸å…³ä¿¡æ¯ï¼Œå¨èƒç­‰çº§ä¸ºé«˜å±æ¼æ´ï¼Œè¯„åˆ†ä¸º 8.8 åˆ†ã€‚</li>
<li>å¦‚æœé›†ç¾¤ <code>API Server</code> é»˜è®¤å…³é—­äº†éè®¤è¯ç«¯å£ï¼Œå¨èƒç­‰çº§ä¸ºä¸­å±æ¼æ´ï¼Œè¯„åˆ†ä¸º 5.4 åˆ†ã€‚</li>
</ul>
<h2 id=prevention>é˜²èŒƒæªæ–½</h2>
<p>å»ºè®®æ‚¨é‡‡å–ä»¥ä¸‹å®‰å…¨é˜²èŒƒæªæ–½ï¼š</p>
<p>å¦‚æœä¸šåŠ¡å®¹å™¨éœ€ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ä¸”åˆåœ¨éå®‰å…¨ç«¯å£ä¸Šç›‘å¬ï¼Œåˆ™å¯ä»¥é€šè¿‡åœ¨èŠ‚ç‚¹ä¸Šæ‰‹åŠ¨æ·»åŠ  <code>iptables</code> è§„åˆ™æ¥ç¼“è§£æ­¤æ¼æ´ã€‚
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åœ¨é›†ç¾¤ä¸­é…ç½® <code>iptables</code> è§„åˆ™ï¼Œç”¨äºæ‹’ç»éæœ¬åœ°å¯¹ <code>127.0.0.1</code> çš„è®¿é—®æµé‡ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>iptables -I INPUT --dst 127.0.0.0/8 ! --src 127.0.0.0/8 -m conntrack ! --ctstate RELATED,ESTABLISHED,DNAT -j DROP
</code></pre></div><p>å¦‚æœé›†ç¾¤ä¸éœ€è¦å¼€å¯ API Server ä¸å®‰å…¨ç«¯å£ï¼Œå¯ä»¥å°† <code>--insecure-port=0</code> æ·»åŠ åˆ° kubernetes API æœåŠ¡å™¨å‘½ä»¤è¡Œæ¥ç¦ç”¨ç«¯å£ã€‚</p>
<p>å¦‚é›†ç¾¤å†…è¿è¡Œä¸å—ä¿¡ä»»çš„å®¹å™¨ï¼Œå¯ä»¥ç¦æ­¢ <code>Container</code> å¼€å¯ <code>CAP_NET_RAW</code> èƒ½åŠ›ï¼Œåœ¨ <code>pod spec</code> ä¸­å…³é—­ <code>Container</code> çš„ <code>CAP_NET_RAW</code> èƒ½åŠ›ã€‚</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#204a87;font-weight:700>securityContext</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>capabilities</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>drop</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> 
</span><span style=color:#f8f8f8;text-decoration:underline>    </span>- <span style=color:#4e9a06>&#34;NET_RAW&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>é€šè¿‡ <code>PodSecurityPolicy</code> ç­–ç•¥é™åˆ¶éƒ¨ç½²ç‰¹æƒæˆ–å…±äº«ä¸»æœºç½‘ç»œå®¹å™¨ï¼Œå¦å¤–å¯ä»¥é€šè¿‡åœ¨ç­–ç•¥ä¸­é…ç½® <code>requiredDropCapabilities</code> å¼ºåˆ¶å®¹å™¨éƒ¨ç½²å…³é—­ <code>CAP_NET_RAW</code> èƒ½åŠ›ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.18.4</li>
<li>v1.17.7</li>
<li>v1.16.11</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.15/v1.15.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.15.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.15.12-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/92040.patch target=_blank>kubernetes/kubernetes#92040</a></li>
<li><a href=/zh/docs/releases/v1.14/v1.14.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.14.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.14.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/92040.patch target=_blank>kubernetes/kubernetes#92040</a></li>
<li><a href=/zh/docs/releases/v1.13/v1.13.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.13.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.13.12-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/92040.patch target=_blank>kubernetes/kubernetes#92040</a></li>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2020-8558.1.12.patch target=_blank>CVE-2020-8558.1.12.patch</a></li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2020-8558.1.12.patch target=_blank>CVE-2020-8558.1.12.patch</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> TODO</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c1ec3633b18a80bee04f17816082420b>5.5 - CVE-2020-8552</h1>
<a href=https://www.cvedetails.com/cve/CVE-2020-8552 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>æ­¤æ¼æ´å¯èƒ½ä½¿ <code>API Server</code> æ˜“äºé­å— <code>API</code> è¯·æ±‚æˆåŠŸé€ æˆçš„ <code>DoS</code>ï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p><code>API Server</code> æ˜“äºé­å— <code>API</code> è¯·æ±‚æˆåŠŸé€ æˆçš„ <code>DoS</code>ï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.17.3</li>
<li>v1.16.7</li>
<li>v1.15.10</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.14/v1.14.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.14.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.14.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2020-8552.1.14.patch target=_blank>CVE-2020-8552.1.14.patch</a></li>
<li><a href=/zh/docs/releases/v1.13/v1.13.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.13.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.13.12-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2020-8552.1.13.patch target=_blank>CVE-2020-8552.1.13.patch</a></li>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2020-8552.1.13.patch target=_blank>CVE-2020-8552.1.13.patch</a></li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2020-8552.1.11.patch target=_blank>CVE-2020-8552.1.11.patch</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2020-8552.1.11.patch target=_blank>CVE-2020-8552.1.11.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-fa6c26ffb59581078942a7046be853db>5.6 - CVE-2019-1002101</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-1002101 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åœ¨ <code>kubectl cp</code> å‘½ä»¤æ‰§è¡Œè§£å‹è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–ç›‘æ§ç¬¦å·é“¾æ¥å¤´åŒåç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œä»è€Œé€ æˆç ´åã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p><code>kubectl cp</code> å‘½ä»¤å…è®¸ç”¨æˆ·åœ¨å®¹å™¨å’Œç”¨æˆ·æœºå™¨ä¹‹é—´æ‹·è´æ–‡ä»¶ï¼Œæ”»å‡»è€…å¯èƒ½é€šè¿‡åœ¨é•œåƒæˆ–è¿è¡Œå®¹å™¨ä¸­æ¤å…¥å¸¦æœ‰ç¬¦å·é“¾æ¥ï¼ˆsymbolic linksï¼‰å¤´çš„æ¶æ„ <code>tar</code> åŒ…ï¼Œåœ¨ <code>cp</code> å‘½ä»¤æ‰§è¡Œè§£å‹è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–ç›‘æ§ç¬¦å·é“¾æ¥å¤´åŒåç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œä»è€Œé€ æˆç ´åã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.14.1</li>
<li>v1.13.6</li>
<li>v1.12.8</li>
<li>v1.11.10</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-1002101.1.10.patch target=_blank>CVE-2019-1002101.1.10.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3bb42a6493fbd1d3d06aad85c3d8d1e7>5.7 - CVE-2019-11251</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11251 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>è¯¥æ¼æ´ä¸ä¸ä¹…å‰çš„ <a href=/zh/docs/patches/cve-2019-1002101 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åœ¨ kubectl cp å‘½ä»¤æ‰§è¡Œè§£å‹è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–ç›‘æ§ç¬¦å·é“¾æ¥å¤´åŒåç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œä»è€Œé€ æˆç ´åã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-1002101</a>ã€<a href=/zh/docs/patches/cve-2019-11246 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå† (Path Traversal) çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11246</a>ã€<a href=/zh/docs/patches/cve-2019-11249 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11249</a> æ¼æ´å½±å“ç›¸ä¼¼ã€‚</p>
<p><code>kubectl cp</code> å‘½ä»¤ç”¨äºç”¨æˆ·å®¹å™¨å’Œä¸»æœºä¹‹é—´çš„æ–‡ä»¶æ‹·è´ï¼Œå½“ä»å®¹å™¨ä¸­æ‹·è´æ–‡ä»¶æ—¶ï¼Œ<code>Kubernetes</code> é¦–å…ˆä¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œ <code>tar</code> å‘½ä»¤åˆ›å»ºç›¸åº”çš„å½’æ¡£æ–‡ä»¶ï¼Œç„¶åå‘é€ç»™å®¢æˆ·ç«¯ï¼Œç„¶å <code>kubectl</code> ä¼šåœ¨ç”¨æˆ·ä¸»æœºä¸Šè¿›è¡Œç›¸åº”è§£å‹æ“ä½œã€‚</p>
<p>å¦‚æœå®¹å™¨ <code>tar</code> åŒ…ä¸­åŒ…å«æ¶æ„æ–‡ä»¶ï¼Œå½“æ”»å‡»è€…å…·æœ‰ <code>kubectl cp</code> å‘½ä»¤çš„æ‰§è¡Œæƒé™æ—¶ï¼Œå¯ä»¥åˆ©ç”¨è·¯å¾„éå†(Path Traversal)ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.15.4</li>
<li>v1.14.7</li>
<li>v1.13.11</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/82503.patch target=_blank>kubernetes/kubernetes#82503</a></li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/82503.patch target=_blank>kubernetes/kubernetes#82503</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11251.1.10.patch target=_blank>CVE-2019-11251.1.10.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-da5de8654ce647927106ce1dae3b6382>5.8 - CVE-2019-11248</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11248 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>å¯ä»¥é€šè¿‡å¥åº·æ£€æŸ¥çš„ç«¯å£è®¿é—® <code>/debug/pprof</code>ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>è¯¥æ¼æ´å­˜åœ¨äº <code>Kubelet</code> ä¸­ï¼Œç”¨äºæ€§èƒ½è°ƒè¯•çš„ <code>/debug/pprof</code> è·Ÿå¥åº·æ£€æŸ¥ç«¯å£ <code>/healthz</code> ç»‘å®šåœ¨ä¸€èµ·ï¼Œå…¶ä¸­ <code>/debug/pprof</code> ä¼šè¿›è¡Œå®‰å…¨è®¤è¯ï¼Œä½† <code>/healthz</code> æ¥å£å¹¶ä¸è¿›è¡Œè®¤è¯é‰´æƒã€‚æ‰€ä»¥å¦‚æœ <code>Kubelet</code> çš„ <code>healthz</code> åœ°å€æœªä½¿ç”¨ <code>localhost</code>ï¼Œåˆ™ä¼šå­˜åœ¨æ³„éœ²æœºå™¨æ•æ„Ÿä¿¡æ¯çš„é£é™©ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.14.4</li>
<li>v1.13.8</li>
<li>v1.12.10</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11248.1.11.patch target=_blank>CVE-2019-11248.1.11.patch</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11248.1.11.patch target=_blank>CVE-2019-11248.1.11.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d902d3ffd5b3d43bf94a51814ab569c7>5.9 - CVE-2019-11247</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11247 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p><code>API Server</code> å…è®¸é€šè¿‡é”™è¯¯çš„èŒƒå›´è®¿é—®è‡ªå®šä¹‰çš„èµ„æºã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>å¦‚æœæŸä¸ªç”¨æˆ·è¯·æ±‚çš„èµ„æºå·²åˆ’åˆ†åˆ°å‘½åç©ºé—´ï¼ŒKubernetes kube-apiserver å°†é”™è¯¯åœ°å…è®¸è¯¥ç”¨æˆ·è®¿é—®é›†ç¾¤èŒƒå›´å†…çš„è‡ªå®šä¹‰èµ„æºã€‚</p>
<p>ä»¥è¿™ç§æ–¹å¼è®¿é—®èµ„æºå°†ç­‰åŒäºæˆäºˆå‘½åç©ºé—´å†…æ‰€æœ‰è§’è‰²åŠå…¶æƒé™ï¼Œè¿™æ„å‘³ç€æœ¬æ¥åªèƒ½è®¿é—®å‘½åç©ºé—´ä¸­ä¸€ä¸ªèµ„æºçš„ç”¨æˆ·å°†èƒ½å¤Ÿåˆ›å»ºã€æŸ¥çœ‹ã€æ›´æ–°æˆ–åˆ é™¤æ•´ä¸ªé›†ç¾¤èŒƒå›´çš„èµ„æºï¼ˆå…·ä½“å–å†³äºå…¶å‘½åç©ºé—´è§’è‰²æƒé™ï¼‰ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.12.12</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11247.1.11.patch target=_blank>CVE-2019-11247.1.11.patch</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> TODO</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-17adf9e532c044f0bc96bf2fe6fabb70>5.10 - CVE-2019-11246</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11246 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå† (Path Traversal) çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>è¯¥æ¼æ´ä¸ä¸ä¹…å‰çš„ <a href=/zh/docs/patches/cve-2019-1002101 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åœ¨ kubectl cp å‘½ä»¤æ‰§è¡Œè§£å‹è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–ç›‘æ§ç¬¦å·é“¾æ¥å¤´åŒåç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œä»è€Œé€ æˆç ´åã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-1002101</a> æ¼æ´å½±å“ç›¸ä¼¼ã€‚</p>
<p><code>kubectl cp</code> å‘½ä»¤ç”¨äºç”¨æˆ·å®¹å™¨å’Œä¸»æœºä¹‹é—´çš„æ–‡ä»¶æ‹·è´ã€‚å½“ä»å®¹å™¨ä¸­æ‹·è´æ–‡ä»¶æ—¶ï¼Œ<code>Kubernetes</code> é¦–å…ˆä¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œ <code>tar</code> å‘½ä»¤åˆ›å»ºç›¸åº”çš„å½’æ¡£æ–‡ä»¶ï¼Œç„¶åå‘é€ç»™å®¢æˆ·ç«¯ï¼Œ<code>kubectl</code> ä¼šåœ¨ç”¨æˆ·ä¸»æœºä¸Šè¿›è¡Œç›¸åº”è§£å‹æ“ä½œã€‚</p>
<p>å¦‚æœå®¹å™¨ <code>tar</code> åŒ…ä¸­åŒ…å«æ¶æ„æ–‡ä»¶ï¼Œå½“æ”»å‡»è€…å…·æœ‰ <code>kubectl cp</code> å‘½ä»¤çš„æ‰§è¡Œæƒé™æ—¶ï¼Œå¯ä»¥åˆ©ç”¨è·¯å¾„éå† (Path Traversal) æ–¹å¼å°†æ¶æ„æ–‡ä»¶å†™å…¥ä»»æ„è·¯å¾„ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.14.3</li>
<li>v1.13.7</li>
<li>v1.12.10</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11246.1.11.patch target=_blank>CVE-2019-11246.1.11.patch</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11246.1.10.patch target=_blank>CVE-2019-11246.1.10.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-678704d1c81cba20ab7f9af62e484052>5.11 - CVE-2019-11245</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11245 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>è¿™æ˜¯ä¸€ä¸ªææƒæ¼æ´ï¼Œé€šå¸¸ä»¥å®¹å™¨ <code>Dockerfile</code> ä¸­æŒ‡å®šçš„ <code>USER</code> è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ <code>root</code>(uid 0) èº«ä»½è¿è¡Œã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>æ‰€æœ‰æœªæŒ‡å®š <code>mustRunAsNonRoot: true</code> çš„ <code>Pod</code>ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ <code>root</code>(uid 0) èº«ä»½è¿è¡Œã€‚</p>
<h2 id=prevention>é˜²èŒƒæªæ–½</h2>
<p>ä¸º <code>Pod</code> æŒ‡å®š <code>mustRunAsNonRoot: true</code>ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.14.3</li>
<li>v1.13.7</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/78320.patch target=_blank>kubernetes/kubernetes#78320</a></li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/78320.patch target=_blank>kubernetes/kubernetes#78320</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/kubernetes/kubernetes/pull/78320.patch target=_blank>kubernetes/kubernetes#78320</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-9677918ea7ce2b1d4116bfb9d4d31512>5.12 - CVE-2019-11249</h1>
<a href=https://www.cvedetails.com/cve/CVE-2019-11249 target=_blank>æ¼æ´è¯¦æƒ…</a>
<p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>è¯¥æ¼æ´ä¸ä¸ä¹…å‰çš„ <a href=/zh/docs/patches/cve-2019-1002101 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åœ¨ kubectl cp å‘½ä»¤æ‰§è¡Œè§£å‹è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–ç›‘æ§ç¬¦å·é“¾æ¥å¤´åŒåç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œä»è€Œé€ æˆç ´åã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-1002101</a>ã€<a href=/zh/docs/patches/cve-2019-11246 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå† (Path Traversal) çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11246</a> æ¼æ´å½±å“ç›¸ä¼¼ã€‚</p>
<p><code>kubectl cp</code> å‘½ä»¤ç”¨äºç”¨æˆ·å®¹å™¨å’Œä¸»æœºä¹‹é—´çš„æ–‡ä»¶æ‹·è´ï¼Œå½“ä»å®¹å™¨ä¸­æ‹·è´æ–‡ä»¶æ—¶ï¼Œ<code>Kubernetes</code> é¦–å…ˆä¼šåœ¨å®¹å™¨ä¸­æ‰§è¡Œ <code>tar</code> å‘½ä»¤åˆ›å»ºç›¸åº”çš„å½’æ¡£æ–‡ä»¶ï¼Œç„¶åå‘é€ç»™å®¢æˆ·ç«¯ï¼Œç„¶å <code>kubectl</code> ä¼šåœ¨ç”¨æˆ·ä¸»æœºä¸Šè¿›è¡Œç›¸åº”è§£å‹æ“ä½œã€‚</p>
<p>å¦‚æœå®¹å™¨ <code>tar</code> åŒ…ä¸­åŒ…å«æ¶æ„æ–‡ä»¶ï¼Œå½“æ”»å‡»è€…å…·æœ‰ <code>kubectl cp</code> å‘½ä»¤çš„æ‰§è¡Œæƒé™æ—¶ï¼Œå¯ä»¥åˆ©ç”¨è·¯å¾„éå† (Path Traversal)ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.15.2</li>
<li>v1.14.5</li>
<li>v1.13.9</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11249.1.12.patch target=_blank>CVE-2019-11249.1.12.patch</a></li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11249.1.12.patch target=_blank>CVE-2019-11249.1.12.patch</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/CVE-2019-11249.1.10.patch target=_blank>CVE-2019-11249.1.10.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-66481705776642cc7da302c2a84c2907>5.13 - nokmem</h1>
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1507149" target=_blank>Bug è¯¦æƒ…</a>
<p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p>
<h2 id=scope>Bug å½±å“</h2>
<p>èŠ‚ç‚¹é•¿æœŸä½¿ç”¨çš„æ—¶å€™æç¤ºå‰©ä½™ç©ºé—´ä¸è¶³çš„é”™è¯¯ï¼ŒæŠ¥é”™ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>mkdir: cannot create directory '/sys/fs/cgroup/memory/8': No space left on device
</code></pre><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥å’Œè¿™ä¸ªé”™è¯¯, å¹¶ä¸”åˆ›å»º <code>Pod</code> æ€»æ˜¯å¤±è´¥ï¼Œè¿™æ˜¯ä¸€ä¸ªæ½œåœ¨çš„â€œå®šæ—¶ç‚¸å¼¹â€ã€‚</p>
<p>æ‰€æœ‰ä½¿ç”¨ä½ç‰ˆæœ¬å†…æ ¸çš„ç¯å¢ƒä»¥åŠ Kubernetes 1.22 ä¹‹å‰çš„ç‰ˆæœ¬éƒ½ä¼šå—åˆ°å½±å“ï¼Œåœ¨ runc 1.0.0-rc94 (<a href=https://github.com/opencontainers/runc/pull/2840 target=_blank>opencontainers/runc#2840</a>) è¿›è¡Œäº†ä¿®å¤(è¢«ç›´æ¥ç§»é™¤)ã€‚</p>
<h2 id=prevention>é˜²èŒƒæªæ–½</h2>
<ul>
<li>å‡çº§ç³»ç»Ÿå†…æ ¸</li>
<li>Kubernetes 1.14 åŠä»¥ä¸Š
<ul>
<li>é‡æ–°æ„å»º Kubelet å¸¦ä¸Š <code>-tags=nokmem</code></li>
</ul>
</li>
<li>Kubernetes 1.14 ä»¥ä¸‹
<ul>
<li>æœ‰å…³ç¡¬ç¼–ç ï¼Œè¯·å‚è€ƒ <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.13.patch target=_blank>nokmem.1.13.patch</a></li>
</ul>
</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/releases/v1.23/v1.23.4-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.23.4 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.23.4-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.22/v1.22.7-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.22.7 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.22.7-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.21/v1.21.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.21.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.21.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.20/v1.20.16-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.20.16 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.20.16-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.19/v1.19.16-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.19.16 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.19.16-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.18/v1.18.20-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.18.20 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.18.20-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.17/v1.17.17-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.17.17 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.17.17-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.16/v1.16.15-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.16.15 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.16.15-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.15/v1.15.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.15.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.15.12-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.14/v1.14.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.14.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.14.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.19.patch target=_blank>nokmem.1.19.patch</a></li>
<li><a href=/zh/docs/releases/v1.13/v1.13.12-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.13.12 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.13.12-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.13.patch target=_blank>nokmem.1.13.patch</a></li>
<li><a href=/zh/docs/releases/v1.12/v1.12.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.12.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.13.patch target=_blank>nokmem.1.13.patch</a></li>
<li><a href=/zh/docs/releases/v1.11/v1.11.10-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.11.10-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.13.patch target=_blank>nokmem.1.13.patch</a></li>
<li><a href=/zh/docs/releases/v1.10/v1.10.13-lts.1 title="è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.10.13-lts.1</a> <a href=https://github.com/klts-io/kubernetes-lts/raw/main/patches/nokmem.1.13.patch target=_blank>nokmem.1.13.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-810bac82108a5b9ba17ebba536d679bf>6 - æ·»åŠ  CVE è¡¥ä¸åˆ° klts</h1>
<p>CVE åœ¨ kubernetes ç¤¾åŒºæ˜¯æŒç»­æ›´æ–°çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»´æŠ¤çš„æ‰€æœ‰ç‰ˆæœ¬ä¸­ä¿®å¤æ›´æ–°çš„ CVE æ¼æ´ã€‚åŸºäºæº patch æ–‡ä»¶åœ¨ä½äºæ­¤ patch çš„ç‰ˆæœ¬æ›´æ–°å‡ºå„ä¸ªç‰ˆæœ¬å¯¹åº”çš„ patch æ–‡ä»¶ã€‚<code>klts</code> æœ‰è‡ªåŠ¨æ›´æ–° patch çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦è§£å†³å†²çªï¼Œä¿è¯ä»£ç çš„æœ‰æ•ˆæ€§å’Œå¯ç”¨æ€§ã€‚</p>
<p>ä¸‹é¢å°†ä»‹ç»å¦‚ä½•æŠŠåœ¨ <code>klts</code> ä¸­æ·»åŠ ä¸€ä¸ª CVE è¡¥ä¸ã€‚</p>
<ol>
<li>å…ˆæŒ‡å®šéœ€è¦ä¿®å¤çš„ CVE è„šæœ¬ï¼Œä¿®æ”¹ <code>release.yaml</code>ï¼Œå…ˆæ·»åŠ å¯¹åº” CVE çš„ <code>patch</code> æ¥æºï¼Œæ­¤è·¯å¾„å¯ä»¥æ˜¯ä¸€ä¸ªé“¾æ¥ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½åˆ° <a href=https://github.com/klts-io/kubernetes-lts/tree/main/patches>/patches</a> ç›®å½•ï¼Œ<code>Score</code> æ˜¯ä»£è¡¨è¿™ä¸ª CVE çš„ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šé«˜è¯´æ˜å¯¹å®‰å…¨çš„å½±å“æ›´å¤§ã€‚<code>&lt; k8s1.13</code> è¡¨ç¤ºåœ¨1.13ï¼ˆ1.12ï¼Œ1.11ï¼Œ1.10ï¼‰ä»¥ä¸‹çš„ç‰ˆæœ¬éƒ½éœ€è¦è¢«è§£å†³æ¼æ´ã€‚</li>
</ol>
<p>åœ¨1.12ç‰ˆæœ¬ä¸­è¿ç”¨ <code>CVE-2019-11253</code> patch æ–‡ä»¶ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>     - name: v1.12.10-lts.1
        base_release: v1.12.10-ci
        must: <span style=color:#204a87>true</span>
        patches:
          - CVE-2019-11253

     <span style=color:#8f5902;font-style:italic># CVSS Score 5.0, &lt; k8s1.13, https://www.cvedetails.com/cve/CVE-2019-11253/</span>
     <span style=color:#8f5902;font-style:italic># TODO</span>
     - name: CVE-2019-11253
       patch:
          - https://github.com/kubernetes/kubernetes/pull/83436.patch
</code></pre></div><ol start=2>
<li>æ£€æŸ¥ <code>v1.12.10-lts.1</code> æ˜¯å¦èƒ½å¤Ÿå®Œå…¨è¿ç”¨æ­¤ patchï¼Œå¦‚æœæœ‰å†²çªï¼Œå°†ä¼šæ‰‹åŠ¨å»è§£å†³å†²çªä»£ç ã€‚</li>
</ol>
<pre><code class=language-shel data-lang=shel>~/workspace/kubernetes-lts: main Â± : make v1.12.10-lts.1
Checkout to v1.12.10-lts.1
./hack/checkout.sh v1.12.10-lts.1
remote: Enumerating objects: 77218, done.
remote: Counting objects: 100% (29330/29330), done.
remote: Compressing objects: 100% (11622/11622), done.
remote: Total 14180 (delta 7451), reused 5859 (delta 2116), pack-reused 0
Receiving objects: 100% (14180/14180), 15.77 MiB | 1.90 MiB/s, done.
Resolving deltas: 100% (7451/7451), completed with 4241 local objects.
Reset branch 'tag-v1.12.10'
</code></pre><p>å¦‚æœè¾“å‡ºä¸‹é¢çš„æƒ…å†µåˆ™è¡¨ç¤ºè¿™äº›æ–‡ä»¶æœ‰å†²çªï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>To restore the original branch and stop patching, run <span style=color:#4e9a06>&#34;git am --abort&#34;</span>.

+++ Conflicts detected:

UU Godeps/Godeps.json
UU staging/src/k8s.io/api/Godeps/Godeps.json
UU staging/src/k8s.io/apiextensions-apiserver/Godeps/Godeps.json
UU staging/src/k8s.io/apimachinery/Godeps/Godeps.json
UU staging/src/k8s.io/apiserver/Godeps/Godeps.json
UU staging/src/k8s.io/cli-runtime/Godeps/Godeps.json
UU staging/src/k8s.io/client-go/Godeps/Godeps.json
UU staging/src/k8s.io/csi-api/Godeps/Godeps.json
UU staging/src/k8s.io/kube-aggregator/Godeps/Godeps.json
UU staging/src/k8s.io/metrics/Godeps/Godeps.json
UU staging/src/k8s.io/sample-apiserver/Godeps/Godeps.json
UU staging/src/k8s.io/sample-cli-plugin/Godeps/Godeps.json
UU staging/src/k8s.io/sample-controller/Godeps/Godeps.json
UU vendor/gopkg.in/yaml.v2/decode.go
UU vendor/gopkg.in/yaml.v2/encode.go
Aborting.

+++ Aborting in-progress git am.

+++ Returning you to the tag-v1.12.10 branch and cleaning up.
make: *** <span style=color:#ce5c00;font-weight:700>[</span>v1.12.10-lts.1<span style=color:#ce5c00;font-weight:700>]</span> Error <span style=color:#0000cf;font-weight:700>1</span>
</code></pre></div><blockquote>
<p>å¦‚æœå‡ºç°æ²¡æ³•è¯»å–åˆ°æŸä¸€ä¸ª patch æ–‡ä»¶ï¼Œè¯·ç¡®ä¿æº patch æ–‡ä»¶æ­£å¸¸ä¸‹è½½åˆ° <code>/tmp</code> ç›®å½•ï¼Œè¯·é‡æ–°æ‰§è¡Œ <code>make</code> å‘½ä»¤ã€‚</p>
</blockquote>
<ol start=3>
<li>æ ¹æ®è¾“å‡ºçš„ä¿¡æ¯ï¼Œé‡æ–°ä¿®æ”¹ <code>1.12</code> çš„ patch ä¿¡æ¯ï¼š</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>+++ About to attempt patch. To reattempt:
  $ git am -3 /path/to/kubernetes-lts/tmp/83436.patch

Applying: bump gopkg.in/yaml.v2 v2.2.4
Using index info to reconstruct a base tree...
M	Godeps/Godeps.json
M	staging/src/k8s.io/api/Godeps/Godeps.json
M	staging/src/k8s.io/apiextensions-apiserver/Godeps/Godeps.json
M	staging/src/k8s.io/apimachinery/Godeps/Godeps.json
M	staging/src/k8s.io/apiserver/Godeps/Godeps.json
M	staging/src/k8s.io/cli-runtime/Godeps/Godeps.json
M	staging/src/k8s.io/client-go/Godeps/Godeps.json
A	staging/src/k8s.io/cloud-provider/Godeps/Godeps.json
M	staging/src/k8s.io/csi-api/Godeps/Godeps.json
M	staging/src/k8s.io/kube-aggregator/Godeps/Godeps.json
M	staging/src/k8s.io/metrics/Godeps/Godeps.json
M	staging/src/k8s.io/sample-apiserver/Godeps/Godeps.json
M	staging/src/k8s.io/sample-cli-plugin/Godeps/Godeps.json
M	staging/src/k8s.io/sample-controller/Godeps/Godeps.json
M	vendor/gopkg.in/yaml.v2/decode.go
M	vendor/gopkg.in/yaml.v2/encode.go
M	vendor/gopkg.in/yaml.v2/resolve.go
M	vendor/gopkg.in/yaml.v2/scannerc.go
</code></pre></div><p>å°† patch å¤åˆ¶åˆ°<a href=https://github.com/klts-io/kubernetes-lts/tree/main/patches>/patches</a>ç›®å½•ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>cp /path/to/kubernetes-lts/tmp/83436.patch patches/CVE-2019-11253.1.12.patch
</code></pre></div><p>é‡æ–°ä¿®æ”¹ <code>release.yaml</code> æ–‡ä»¶ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>- name: v1.12.10-lts.1
    base_release: v1.12.10-ci
    must: <span style=color:#204a87>true</span>
    patches:
      - CVE-2019-11253.1.12

<span style=color:#8f5902;font-style:italic># CVSS Score 5.0, &lt; k8s1.13, https://www.cvedetails.com/cve/CVE-2019-11253/</span>
     <span style=color:#8f5902;font-style:italic># TODO</span>
     - name: CVE-2019-11253
       patch:
          - https://github.com/kubernetes/kubernetes/pull/83436.patch
     - name: CVE-2019-11253.1.12
       patch:
          - patches/CVE-2019-11253.1.12.patch
</code></pre></div><ol start=3>
<li>æ‰‹åŠ¨è§£å†³å†²çªæ–‡ä»¶ï¼Œè¯·æ³¨æ„æ‰‹åŠ¨è§£å†³å¹¶ä¸æ˜¯åªæ˜¯ç®€å•çš„ä»£ç æ›¿æ¢ï¼Œè¦æ»¡è¶³ä¸‹é¢å‡ ä¸ªæ¡ä»¶ï¼š</li>
</ol>
<ul>
<li>
<p>é‡‡ç”¨ patch ä¿®æ”¹çš„å†…å®¹</p>
</li>
<li>
<p>ä¸Šä¸‹æ–‡æ²¡æœ‰è¯­æ³•é”™è¯¯</p>
</li>
<li>
<p>å¿…é¡»èƒ½é€šè¿‡æµ‹è¯•ç”¨ä¾‹</p>
</li>
</ul>
<p>æ‰§è¡Œä¸‹é¢å‘½ä»¤è§£å†³å†²çªæ–‡ä»¶ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#000>QUIET</span><span style=color:#ce5c00;font-weight:700>=</span>n ./hack/format_patch.sh patches/CVE-2019-11253.1.12.patch

...

+++ Conflicts detected:

UU Godeps/Godeps.json
UU staging/src/k8s.io/api/Godeps/Godeps.json
UU staging/src/k8s.io/apiextensions-apiserver/Godeps/Godeps.json
UU staging/src/k8s.io/apimachinery/Godeps/Godeps.json
UU staging/src/k8s.io/apiserver/Godeps/Godeps.json
UU staging/src/k8s.io/cli-runtime/Godeps/Godeps.json
UU staging/src/k8s.io/client-go/Godeps/Godeps.json
UU staging/src/k8s.io/csi-api/Godeps/Godeps.json
UU staging/src/k8s.io/kube-aggregator/Godeps/Godeps.json
UU staging/src/k8s.io/metrics/Godeps/Godeps.json
UU staging/src/k8s.io/sample-apiserver/Godeps/Godeps.json
UU staging/src/k8s.io/sample-cli-plugin/Godeps/Godeps.json
UU staging/src/k8s.io/sample-controller/Godeps/Godeps.json
UU vendor/gopkg.in/yaml.v2/decode.go
UU vendor/gopkg.in/yaml.v2/encode.go

+++ Please resolve the conflicts in another window <span style=color:#ce5c00;font-weight:700>(</span>and remember to <span style=color:#4e9a06>&#39;git add / git am --continue&#39;</span><span style=color:#ce5c00;font-weight:700>)</span>
+++ Proceed <span style=color:#ce5c00;font-weight:700>(</span>anything but <span style=color:#4e9a06>&#39;y&#39;</span> aborts the patch<span style=color:#ce5c00;font-weight:700>)</span>? <span style=color:#ce5c00;font-weight:700>[</span>y/n<span style=color:#ce5c00;font-weight:700>]</span>
</code></pre></div><p>ç»ˆç«¯ä¼šæš‚åœåœ¨å†²çªé˜¶æ®µï¼Œè¯·æ³¨æ„æ­¤æ—¶éœ€è¦<code>é‡æ–°æ‰“å¼€å¦ä¸€ä¸ªç»ˆç«¯</code>å»è§£å†³å†²çªæ–‡ä»¶ï¼Œå¾…æ‰‹åŠ¨è§£å†³å®Œæ‰€æœ‰å†²çªè¿›è¡Œæ£€æŸ¥ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>~/path/to/kubernetes-lts/src/github.com/kubernetes/kubernetes:: tag-v1.12.10 Â±âœš &gt;R&gt; : git add .
 ~/path/to/kubernetes-lts/src/github.com/kubernetes/kubernetes:: tag-v1.12.10 âœš &gt;R&gt; : git am --continue
Applying: Limit YAML/JSON decode size
 ~/path/to/kubernetes-lts/src/github.com/kubernetes/kubernetes:: tag-v1.12.10 : git status
On branch tag-v1.12.10
nothing to commit, working tree clean
</code></pre></div><p>æœ€é‡è¦çš„ä¸€æ­¥æ“ä½œå°±æ˜¯è¿”å›ä¹‹å‰çš„ç»ˆç«¯ï¼Œç¡®è®¤å†²çªå·²ç»å®Œæˆï¼Œæ­¤æ—¶ä¼šå»æ›´æ–° <code>patches/CVE-2019-11253.1.12.patch</code>ã€‚</p>
<ol start=4>
<li>ä»¥ä¸Šæ“ä½œå°±æ˜¯æ›´æ–°ä¸€ä¸ªç‰ˆæœ¬çš„ patch æ•´ä¸ªæ“ä½œï¼Œå¯ä»¥é€‰æ‹©å…ˆæäº¤åˆ°ä»“åº“è·‘ CI çš„æµ‹è¯•ï¼Œå¦‚æœå½“å‰ç‰ˆæœ¬çš„æµ‹è¯•ç”¨ä¾‹éƒ½é€šè¿‡äº†å°±è¯´æ˜æ­¤æ¬¡ä¿®å¤æœ‰æ•ˆã€‚ç„¶åé€‰æ‹©åœ¨æ­¤ patch ä¸Šå‘ä¸‹å…¼å®¹ã€‚ä¿®æ”¹ <code>release.yaml</code> æ–‡ä»¶:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>- name: v1.12.10-lts.1
    base_release: v1.12.10-ci
    must: <span style=color:#204a87>true</span>
    patches:
      - CVE-2019-11253.1.12

- name: v1.11.10-lts.1
    base_release: v1.11.10-ci
    must: <span style=color:#204a87>true</span>
    patches:
      - CVE-2019-11253.1.11

<span style=color:#8f5902;font-style:italic># CVSS Score 5.0, &lt; k8s1.13, https://www.cvedetails.com/cve/CVE-2019-11253/</span>
     <span style=color:#8f5902;font-style:italic># TODO</span>
     - name: CVE-2019-11253
       patch:
          - https://github.com/kubernetes/kubernetes/pull/83436.patch
     - name: CVE-2019-11253.1.12
       patch:
          - patches/CVE-2019-11253.1.12.patch
     - name: CVE-2019-11253.1.11
       patch:
          - patches/CVE-2019-11253.1.11.patch
</code></pre></div><p>ç»§ç»­æ‰§è¡Œ <code>make v1.11.10-lts.1</code>ï¼Œå¦‚æœæœ‰å†²çªçš„è¯ï¼Œé‡å¤ä»¥ä¸ŠåŠ¨ä½œä¿®å¤ã€‚ç›´åˆ°éªŒè¯æ‰€æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼ˆv1.10.13-lts.1ï¼‰ã€‚</p>
<ol start=5>
<li>å½“æ‰€æœ‰çš„å†²çªè§£å†³å®Œä»¥åï¼Œå¹¶ä¸æ„å‘³ä»£ç å°†å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå¿…é¡»é€šè¿‡ CI çš„æµ‹è¯•ç”¨ä¾‹ã€‚ç›®å‰ CI åªæ”¯æŒ <code>main</code> åˆ†æ”¯ã€‚å¦‚æœåœ¨è‡ªå·±çš„ä»“åº“ï¼Œè¯·åœ¨ main åˆ†æ”¯è¿›è¡Œä¿®æ”¹ï¼Œç¡®ä¿å®Œå…¨æ— è¯¯çš„æƒ…å†µä¸‹å†æäº¤ PR ç”³è¯·åˆå…¥ <a href=https://github.com/klts-io/kubernetes-lts>klts</a> ä¸»åˆ†æ”¯ã€‚</li>
</ol>
<p>åœ¨ <code>github</code> æŸ¥çœ‹æµ‹è¯•æƒ…å†µï¼š</p>
<p><img src=../actions.png alt=actions></p>
<p>æŸ¥çœ‹æäº¤çš„æ‰€æœ‰ job ä¿¡æ¯ï¼Œä¸‹é¢è¯´æ˜ <code>1.15.12</code> ç‰ˆæœ¬æµ‹è¯•å°†ä¸é€šè¿‡ï¼š</p>
<p><img src=../actions01.png alt=actions></p>
<p>æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯è¯¦æƒ…ï¼Œå°†é”™è¯¯è§£å†³å®Œåé‡æ–°æäº¤ï¼Œç›´åˆ°é€šè¿‡æ‰€æœ‰çš„æµ‹è¯•ã€‚</p>
<p><img src=../actions02.png alt=actions></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-9662232d61bca04520940eafdc2967e8>7 - ç‰ˆæœ¬æ—¥å¿—</h1>
</div>
<div class=td-content>
<h1 id=pg-4fa179b3f919d394dbeffd1ed1605e46>7.1 - v1.23</h1>
</div>
<div class=td-content>
<h1 id=pg-0baa225c967bd1ebbf764e2a5b8a571a>7.1.1 - v1.23.4-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.23.4 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c047e6d1ee8dacb74e7c5d5ab95bebcd>7.2 - v1.22</h1>
</div>
<div class=td-content>
<h1 id=pg-0fc555ad48f02740e6bc8881266dd9ff>7.2.1 - v1.22.7-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.22.7 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-01eb7d3a82aab93a8a4b1d1e7efdfef9>7.3 - v1.21</h1>
</div>
<div class=td-content>
<h1 id=pg-74446b3a77f744c15bc6cfdae5d25a02>7.3.1 - v1.21.10-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.21.10 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-20753a751036d9825dd1807db9fedb5f>7.4 - v1.20</h1>
</div>
<div class=td-content>
<h1 id=pg-d3e3289a812dbea417a18b1b47ce7b91>7.4.1 - v1.20.16-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.20.16 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-f9de07315ec208fab6e5c13024a2ce64>7.5 - v1.19</h1>
</div>
<div class=td-content>
<h1 id=pg-101e741dc17aaa2791af948b2cc29d09>7.5.1 - v1.19.16-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.19.16 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-f677a41be7eb5d233978046bb3cf15a0>7.5.2 - v1.19.16-lts.2</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬äºŒä¸ª v1.19.16 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2020-8554 target>/docs/patches/cve-2020-8554/</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6525c9e3fb6b93a7733196db45f3decf>7.6 - v1.18</h1>
</div>
<div class=td-content>
<h1 id=pg-3aad22b5fa10ac4b1170fe162f9be940>7.6.1 - v1.18.20-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.18.20 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2021-25741 title="è¿™æ˜¯ä¸€ä¸ªæƒé™è®¿é—®ç›¸å…³çš„å·å®‰å…¨æ€§é—®é¢˜ã€‚ç”¨æˆ·å¯ä»¥åœ¨åˆ›å»ºçš„å®¹å™¨ä¸­é€šè¿‡ subpath çš„å·æŒ‚è½½æ–¹å¼è®¿é—®åˆ°è¯¥å·æŒ‚è½½ç›®å½•ä¹‹å¤–çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-25741</a><p>è¿™æ˜¯ä¸€ä¸ªæƒé™è®¿é—®ç›¸å…³çš„å·å®‰å…¨æ€§é—®é¢˜ã€‚ç”¨æˆ·å¯ä»¥åœ¨åˆ›å»ºçš„å®¹å™¨ä¸­é€šè¿‡ <code>subpath</code> çš„å·æŒ‚è½½æ–¹å¼è®¿é—®åˆ°è¯¥å·æŒ‚è½½ç›®å½•ä¹‹å¤–çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b4c871eee2d42bdcff8479ff2298fc97>7.6.2 - v1.18.20-lts.2</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬äºŒä¸ª v1.18.20 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li>ä¿®å¤é—®é¢˜: kubelet é‡å¯ååˆ›å»ºçš„æ–° pod ç¼ºå°‘ç¯å¢ƒå˜é‡ KUBERNETES_SERVICE_HOST</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-2270bff767707e56d3db5151552ee5e7>7.7 - v1.17</h1>
</div>
<div class=td-content>
<h1 id=pg-1912fbf1f803c511b573029d327eaab7>7.7.1 - v1.17.17-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.17.17 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-10a9386cc9c8d0a78f738e74e8017feb>7.8 - v1.16</h1>
</div>
<div class=td-content>
<h1 id=pg-d809e31f592dc7918fa421d4d5fcad8a>7.8.1 - v1.16.15-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.16.15 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-1c3b45c2635fddab2687cd5bdd3887e5>7.9 - v1.15</h1>
</div>
<div class=td-content>
<h1 id=pg-93eb576cef91a97a721b738b99609a65>7.9.1 - v1.15.12-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.15.12 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2020-8558 title="kube-proxy ç»„ä»¶åœ¨ iptables å’Œ ipvs æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° net.ipv4.conf.all.route_localnet=1ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° 127.0.0.1 ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8558</a><p><code>kube-proxy</code> ç»„ä»¶åœ¨ <code>iptables</code> å’Œ <code>ipvs</code> æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° <code>net.ipv4.conf.all.route_localnet=1</code>ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° <code>127.0.0.1</code> ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b006ac46509d2d3406cd0499bc3f1517>7.10 - v1.14</h1>
</div>
<div class=td-content>
<h1 id=pg-73f06559fbf8770b07e5a1b9124b796a>7.10.1 - v1.14.10-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.14.10 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2020-8552 title="æ­¤æ¼æ´å¯èƒ½ä½¿ API Server æ˜“äºé­å— API è¯·æ±‚æˆåŠŸé€ æˆçš„ DoSï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8552</a><p>æ­¤æ¼æ´å¯èƒ½ä½¿ <code>API Server</code> æ˜“äºé­å— <code>API</code> è¯·æ±‚æˆåŠŸé€ æˆçš„ <code>DoS</code>ï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8558 title="kube-proxy ç»„ä»¶åœ¨ iptables å’Œ ipvs æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° net.ipv4.conf.all.route_localnet=1ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° 127.0.0.1 ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8558</a><p><code>kube-proxy</code> ç»„ä»¶åœ¨ <code>iptables</code> å’Œ <code>ipvs</code> æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° <code>net.ipv4.conf.all.route_localnet=1</code>ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° <code>127.0.0.1</code> ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8559 title="è¿™æ˜¯ kube-apiserver ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ kubelet çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8559</a><p>è¿™æ˜¯ <code>kube-apiserver</code> ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ <code>kubelet</code> çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c07a278d274fb18221e937fe0cf11ad8>7.11 - v1.13</h1>
</div>
<div class=td-content>
<h1 id=pg-54d322ad1fac2f6a8afd50a52e4d49fa>7.11.1 - v1.13.12-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.13.12 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2020-8552 title="æ­¤æ¼æ´å¯èƒ½ä½¿ API Server æ˜“äºé­å— API è¯·æ±‚æˆåŠŸé€ æˆçš„ DoSï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8552</a><p>æ­¤æ¼æ´å¯èƒ½ä½¿ <code>API Server</code> æ˜“äºé­å— <code>API</code> è¯·æ±‚æˆåŠŸé€ æˆçš„ <code>DoS</code>ï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8558 title="kube-proxy ç»„ä»¶åœ¨ iptables å’Œ ipvs æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° net.ipv4.conf.all.route_localnet=1ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° 127.0.0.1 ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8558</a><p><code>kube-proxy</code> ç»„ä»¶åœ¨ <code>iptables</code> å’Œ <code>ipvs</code> æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° <code>net.ipv4.conf.all.route_localnet=1</code>ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° <code>127.0.0.1</code> ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚</p></li>
<li>TODO <a href=/zh/docs/patches/cve-2020-8559 title="è¿™æ˜¯ kube-apiserver ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ kubelet çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8559</a><p>è¿™æ˜¯ <code>kube-apiserver</code> ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ <code>kubelet</code> çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-e7a48963a7388a7bdcf3c2e0efa67f24>7.12 - v1.12</h1>
</div>
<div class=td-content>
<h1 id=pg-821074ba2798466a54d10d5e0f367ac2>7.12.1 - v1.12.10-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.12.10 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2019-11245 title="è¿™æ˜¯ä¸€ä¸ªææƒæ¼æ´ï¼Œé€šå¸¸ä»¥å®¹å™¨ Dockerfile ä¸­æŒ‡å®šçš„ USER è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ root(uid 0) èº«ä»½è¿è¡Œã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11245</a><p>è¿™æ˜¯ä¸€ä¸ªææƒæ¼æ´ï¼Œé€šå¸¸ä»¥å®¹å™¨ <code>Dockerfile</code> ä¸­æŒ‡å®šçš„ <code>USER</code> è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ <code>root</code>(uid 0) èº«ä»½è¿è¡Œã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11247 title="API Server å…è®¸é€šè¿‡é”™è¯¯çš„èŒƒå›´è®¿é—®è‡ªå®šä¹‰çš„èµ„æºã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11247</a><p><code>API Server</code> å…è®¸é€šè¿‡é”™è¯¯çš„èŒƒå›´è®¿é—®è‡ªå®šä¹‰çš„èµ„æºã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11249 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11249</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11251 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11251</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8552 title="æ­¤æ¼æ´å¯èƒ½ä½¿ API Server æ˜“äºé­å— API è¯·æ±‚æˆåŠŸé€ æˆçš„ DoSï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8552</a><p>æ­¤æ¼æ´å¯èƒ½ä½¿ <code>API Server</code> æ˜“äºé­å— <code>API</code> è¯·æ±‚æˆåŠŸé€ æˆçš„ <code>DoS</code>ï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8558 title="kube-proxy ç»„ä»¶åœ¨ iptables å’Œ ipvs æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° net.ipv4.conf.all.route_localnet=1ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° 127.0.0.1 ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8558</a><p><code>kube-proxy</code> ç»„ä»¶åœ¨ <code>iptables</code> å’Œ <code>ipvs</code> æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° <code>net.ipv4.conf.all.route_localnet=1</code>ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° <code>127.0.0.1</code> ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚</p></li>
<li>TODO <a href=/zh/docs/patches/cve-2020-8559 title="è¿™æ˜¯ kube-apiserver ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ kubelet çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8559</a><p>è¿™æ˜¯ <code>kube-apiserver</code> ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ <code>kubelet</code> çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4505b460b3d867cd384f7ee57eb36337>7.13 - v1.11</h1>
</div>
<div class=td-content>
<h1 id=pg-c06aa76c9df9f82bd046eb0f01e0ea9c>7.13.1 - v1.11.10-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.11.10 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2019-11245 title="è¿™æ˜¯ä¸€ä¸ªææƒæ¼æ´ï¼Œé€šå¸¸ä»¥å®¹å™¨ Dockerfile ä¸­æŒ‡å®šçš„ USER è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ root(uid 0) èº«ä»½è¿è¡Œã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11245</a><p>è¿™æ˜¯ä¸€ä¸ªææƒæ¼æ´ï¼Œé€šå¸¸ä»¥å®¹å™¨ <code>Dockerfile</code> ä¸­æŒ‡å®šçš„ <code>USER</code> è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ <code>root</code>(uid 0) èº«ä»½è¿è¡Œã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11246 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå† (Path Traversal) çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11246</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå† (Path Traversal) çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11247 title="API Server å…è®¸é€šè¿‡é”™è¯¯çš„èŒƒå›´è®¿é—®è‡ªå®šä¹‰çš„èµ„æºã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11247</a><p><code>API Server</code> å…è®¸é€šè¿‡é”™è¯¯çš„èŒƒå›´è®¿é—®è‡ªå®šä¹‰çš„èµ„æºã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11248 title="å¯ä»¥é€šè¿‡å¥åº·æ£€æŸ¥çš„ç«¯å£è®¿é—® /debug/pprofã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11248</a><p>å¯ä»¥é€šè¿‡å¥åº·æ£€æŸ¥çš„ç«¯å£è®¿é—® <code>/debug/pprof</code>ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11249 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11249</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11251 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11251</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8552 title="æ­¤æ¼æ´å¯èƒ½ä½¿ API Server æ˜“äºé­å— API è¯·æ±‚æˆåŠŸé€ æˆçš„ DoSï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8552</a><p>æ­¤æ¼æ´å¯èƒ½ä½¿ <code>API Server</code> æ˜“äºé­å— <code>API</code> è¯·æ±‚æˆåŠŸé€ æˆçš„ <code>DoS</code>ï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8558 title="kube-proxy ç»„ä»¶åœ¨ iptables å’Œ ipvs æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° net.ipv4.conf.all.route_localnet=1ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° 127.0.0.1 ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8558</a><p><code>kube-proxy</code> ç»„ä»¶åœ¨ <code>iptables</code> å’Œ <code>ipvs</code> æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° <code>net.ipv4.conf.all.route_localnet=1</code>ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° <code>127.0.0.1</code> ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚</p></li>
<li>TODO <a href=/zh/docs/patches/cve-2020-8559 title="è¿™æ˜¯ kube-apiserver ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ kubelet çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8559</a><p>è¿™æ˜¯ <code>kube-apiserver</code> ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ <code>kubelet</code> çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-bcc7e5c745acc27b204884b44e0c3cbb>7.14 - v1.10</h1>
</div>
<div class=td-content>
<h1 id=pg-ffbcd5ebf3f1c36ebfe008f5a6ad4f0b>7.14.1 - v1.10.13-lts.1</h1>
<p>è¿™æ˜¯ KLTS å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.10.13 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/patches/cve-2019-11245 title="è¿™æ˜¯ä¸€ä¸ªææƒæ¼æ´ï¼Œé€šå¸¸ä»¥å®¹å™¨ Dockerfile ä¸­æŒ‡å®šçš„ USER è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ root(uid 0) èº«ä»½è¿è¡Œã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11245</a><p>è¿™æ˜¯ä¸€ä¸ªææƒæ¼æ´ï¼Œé€šå¸¸ä»¥å®¹å™¨ <code>Dockerfile</code> ä¸­æŒ‡å®šçš„ <code>USER</code> è¿è¡Œçš„å®¹å™¨ï¼Œåœ¨å®¹å™¨é‡å¯æ—¶æˆ–è€…å¦‚æœé•œåƒå…ˆå‰è¢«æ‹‰åˆ°èŠ‚ç‚¹æ—¶ï¼Œéƒ½å°†ä»¥ <code>root</code>(uid 0) èº«ä»½è¿è¡Œã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-1002101 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åœ¨ kubectl cp å‘½ä»¤æ‰§è¡Œè§£å‹è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–ç›‘æ§ç¬¦å·é“¾æ¥å¤´åŒåç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œä»è€Œé€ æˆç ´åã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-1002101</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åœ¨ <code>kubectl cp</code> å‘½ä»¤æ‰§è¡Œè§£å‹è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–ç›‘æ§ç¬¦å·é“¾æ¥å¤´åŒåç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ï¼Œä»è€Œé€ æˆç ´åã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11246 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå† (Path Traversal) çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11246</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå† (Path Traversal) çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li>TODO <a href=/zh/docs/patches/cve-2019-11247 title="API Server å…è®¸é€šè¿‡é”™è¯¯çš„èŒƒå›´è®¿é—®è‡ªå®šä¹‰çš„èµ„æºã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11247</a><p><code>API Server</code> å…è®¸é€šè¿‡é”™è¯¯çš„èŒƒå›´è®¿é—®è‡ªå®šä¹‰çš„èµ„æºã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11248 title="å¯ä»¥é€šè¿‡å¥åº·æ£€æŸ¥çš„ç«¯å£è®¿é—® /debug/pprofã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11248</a><p>å¯ä»¥é€šè¿‡å¥åº·æ£€æŸ¥çš„ç«¯å£è®¿é—® <code>/debug/pprof</code>ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11249 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11249</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2019-11251 title="æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ kubectl cp å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ tar åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚" data-toggle=tooltip data-placement=top target>CVE-2019-11251</a><p>æ­¤æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…åˆ©ç”¨ <code>kubectl cp</code> å‘½ä»¤ï¼Œé‡‡ç”¨è·¯å¾„éå†(Path Traversal)çš„æ–¹å¼å°†å®¹å™¨ <code>tar</code> åŒ…ä¸­çš„æ¶æ„æ–‡ä»¶å†™å…¥æ‰€åœ¨ä¸»æœºä¸Šçš„ä»»ä½•è·¯å¾„ï¼Œè¯¥è¿‡ç¨‹ä»…å—æœ¬åœ°ç”¨æˆ·çš„ç³»ç»Ÿæƒé™é™åˆ¶ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2020-8552 title="æ­¤æ¼æ´å¯èƒ½ä½¿ API Server æ˜“äºé­å— API è¯·æ±‚æˆåŠŸé€ æˆçš„ DoSï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8552</a><p>æ­¤æ¼æ´å¯èƒ½ä½¿ <code>API Server</code> æ˜“äºé­å— <code>API</code> è¯·æ±‚æˆåŠŸé€ æˆçš„ <code>DoS</code>ï¼ˆæ‹’ç»æœåŠ¡æ”»å‡»ï¼‰ã€‚</p></li>
<li>TODO <a href=/zh/docs/patches/cve-2020-8558 title="kube-proxy ç»„ä»¶åœ¨ iptables å’Œ ipvs æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° net.ipv4.conf.all.route_localnet=1ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° 127.0.0.1 ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8558</a><p><code>kube-proxy</code> ç»„ä»¶åœ¨ <code>iptables</code> å’Œ <code>ipvs</code> æ¨¡å¼ä¸‹å‡éœ€è¦è®¾ç½®å†…æ ¸å‚æ•° <code>net.ipv4.conf.all.route_localnet=1</code>ï¼Œ ä»è€Œå…è®¸æœ¬åœ°å›ç¯è®¿é—®ã€‚æ”»å‡»è€…å¯èƒ½é€šè¿‡å…±äº«ä¸»æœºç½‘ç»œçš„å®¹å™¨ï¼Œæˆ–åœ¨é›†ç¾¤èŠ‚ç‚¹è®¿é—®åŒä¸€ä¸ª LAN æˆ–äºŒå±‚ç½‘ç»œä¸‹çš„ç›¸é‚»èŠ‚ç‚¹ä¸Šç»‘å®šç›‘å¬æœ¬åœ° <code>127.0.0.1</code> ç«¯å£çš„ TCP/UDP æœåŠ¡ï¼Œä»è€Œè·å–æ¥å£ä¿¡æ¯ã€‚å¦‚æœæ‚¨çš„æœåŠ¡æ²¡æœ‰è®¾ç½®å¿…è¦çš„å®‰å…¨è®¤è¯ï¼Œå¯èƒ½ä¼šé€ æˆä¿¡æ¯æ³„éœ²é£é™©ã€‚</p></li>
<li>TODO <a href=/zh/docs/patches/cve-2020-8559 title="è¿™æ˜¯ kube-apiserver ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ kubelet çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2020-8559</a><p>è¿™æ˜¯ <code>kube-apiserver</code> ç»„ä»¶çš„å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æˆªå–æŸäº›å‘é€è‡³èŠ‚ç‚¹ <code>kubelet</code> çš„å‡çº§è¯·æ±‚ï¼Œé€šè¿‡è¯·æ±‚ä¸­åŸæœ‰çš„è®¿é—®å‡­æ®è½¬å‘è¯·æ±‚è‡³å…¶ä»–ç›®æ ‡èŠ‚ç‚¹ï¼Œä»è€Œé€ æˆèŠ‚ç‚¹æƒé™æå‡çš„æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/cve-2021-3121 title="å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ Protobuf æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ Gogo Protobuf ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-3121</a><p>å­˜åœ¨è¯¥æ¼æ´çš„ç¨‹åºå¯èƒ½ä¼šå› ä¸ºå¤„ç†äº†åŒ…å«æ¶æ„ <code>Protobuf</code> æ¶ˆæ¯è€Œå´©æºƒã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ <code>Gogo Protobuf</code> ç‰ˆæœ¬è¿‡ä½ï¼Œå¯èƒ½å­˜åœ¨è¯¥æ¼æ´ã€‚</p></li>
<li><a href=/zh/docs/patches/nokmem title="èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º Podã€‚" data-toggle=tooltip data-placement=top target>nokmem</a><p>èŠ‚ç‚¹ç£ç›˜å……è¶³ä½†æ˜¯ä¸€ç›´æŠ¥ç£ç›˜ä¸è¶³æ— æ³•åˆ›å»º <code>Pod</code>ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4ea5ec9f40d271955e679919836ca15a>8 - Containerd</h1>
</div>
<div class=td-content>
<h1 id=pg-dfed8f673232f42492878a06c4fd00a2>8.1 - ä¿®å¤çš„æ¼æ´</h1>
</div>
<div class=td-content>
<h1 id=pg-e9361514b1c4a6b356b66541847b30b2>8.1.1 - CVE-2021-41103</h1>
<p><a href=https://www.cvedetails.com/cve/CVE-2021-41103 target=_blank>æ¼æ´è¯¦æƒ…</a>
<a href="https://github.com/containerd/containerd/security/advisories/GHSA-c2h3-6mxw-7mvq?spm=a2c4g.11186623.0.0.392834c1nttyAo" target=_blank>æ¼æ´è¯¦æƒ…(å®˜æ–¹)</a></p>
<p>åœ¨å®¹å™¨æ ¹ç›®å½•å’Œä¸€äº›ç³»ç»Ÿæ’ä»¶ä¸­ç¼ºå°‘å¿…è¦çš„æƒé™çº¦æŸæ—¶ï¼Œå¯ä½¿ä¸€ä¸ªéç‰¹æƒçš„ä¸»æœº Linux ç”¨æˆ·æ‹¥æœ‰éå†å®¹å™¨æ–‡ä»¶ç³»ç»Ÿå¹¶æ‰§è¡Œç›®æ ‡ç¨‹åºçš„æƒé™ã€‚</p>
<h2 id=scope>æ¼æ´å½±å“</h2>
<p>åœ¨å¤šç§Ÿæˆ·åœºæ™¯ä¸‹ï¼Œå¦‚æœé›†ç¾¤èŠ‚ç‚¹ä¸­çš„å®¹å™¨åŒ…å«æ‰©å±•æƒé™ï¼ˆä¾‹å¦‚ setuidï¼‰ï¼Œéç‰¹æƒçš„ Linux ç”¨æˆ·å¯èƒ½å‘ç°å¹¶æ‰§è¡Œè¯¥ç¨‹åºã€‚å¦‚æœéç‰¹æƒçš„ä¸»æœº Linux ç”¨æˆ· UID ç¢°æ’åˆ°äº†å®¹å™¨ä¸­æ‰§è¡Œç¨‹åºçš„æ‰€å±ç”¨æˆ·æˆ–ç»„ï¼Œè¿™ä¸ªéç‰¹æƒçš„ Linux ç”¨æˆ·å¯ä»¥è¯»å†™è¯¥æ–‡ä»¶ä»è€Œå¯¼è‡´è¶Šæƒè®¿é—®ã€‚</p>
<h3 id=cvss>æ¼æ´è¯„åˆ†</h3>
<p>è¯¥æ¼æ´ä¸ºé«˜å±æ¼æ´ï¼Œ <code>CVSS</code> è¯„åˆ†ä¸º 7.2ã€‚</p>
<h2 id=prevention>é˜²èŒƒæªæ–½</h2>
<p>ä¿è¯é›†ç¾¤èŠ‚ç‚¹ç™»å½•ç”¨æˆ·éƒ½æ˜¯å¯ä¿¡ç”¨æˆ·ï¼Œé™åˆ¶éå—ä¿¡ç”¨æˆ·å¯¹é›†ç¾¤èŠ‚ç‚¹çš„è®¿é—®æƒé™ã€‚
æ”¶æ•›å®¹å™¨ bundles ç›®å½•ä¸­ä¸å¿…è¦çš„æ‰©å±•æƒé™ã€‚</p>
<h2 id=official-fixed>å®˜æ–¹ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li>v1.4.11</li>
<li>v1.5.7</li>
</ul>
<h2 id=klts-fixed>KLTS ä¿®å¤çš„ç‰ˆæœ¬</h2>
<ul>
<li><a href=/zh/docs/containerd/releases/v1.3/v1.3.10-lts.1 title="è¿™æ˜¯ KLTS Containerd å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.3.10 ä¿®å¤ç‰ˆæœ¬ã€‚" data-toggle=tooltip data-placement=top target>v1.3.10-lts.1</a> <a href=https://github.com/klts-io/containerd-lts/raw/main/patches/CVE-2021-41103.1.3.patch target=_blank>CVE-2021-41103.1.3.patch</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3e836e30cf6d82e7ba52f18ff1014469>8.2 - ç‰ˆæœ¬æ—¥å¿—</h1>
</div>
<div class=td-content>
<h1 id=pg-d12c1156c3a7ffcccdbc9a23eaa464fb>8.2.1 - v1.3</h1>
</div>
<div class=td-content>
<h1 id=pg-ba6a1de6462c22fab2fedb173af0d8f2>8.2.1.1 - v1.3.10-lts.1</h1>
<p>è¿™æ˜¯ KLTS Containerd å‘å¸ƒçš„ç¬¬ä¸€ä¸ª v1.3.10 ä¿®å¤ç‰ˆæœ¬ã€‚</p>
<h2 id=è¡¥ä¸>è¡¥ä¸</h2>
<ul>
<li><a href=/zh/docs/containerd/patches/cve-2021-41103 title="åœ¨å®¹å™¨æ ¹ç›®å½•å’Œä¸€äº›ç³»ç»Ÿæ’ä»¶ä¸­ç¼ºå°‘å¿…è¦çš„æƒé™çº¦æŸæ—¶ï¼Œå¯ä½¿ä¸€ä¸ªéç‰¹æƒçš„ä¸»æœº Linux ç”¨æˆ·æ‹¥æœ‰éå†å®¹å™¨æ–‡ä»¶ç³»ç»Ÿå¹¶æ‰§è¡Œç›®æ ‡ç¨‹åºçš„æƒé™ã€‚" data-toggle=tooltip data-placement=top target>CVE-2021-41103</a><p>åœ¨å®¹å™¨æ ¹ç›®å½•å’Œä¸€äº›ç³»ç»Ÿæ’ä»¶ä¸­ç¼ºå°‘å¿…è¦çš„æƒé™çº¦æŸæ—¶ï¼Œå¯ä½¿ä¸€ä¸ªéç‰¹æƒçš„ä¸»æœº Linux ç”¨æˆ·æ‹¥æœ‰éå†å®¹å™¨æ–‡ä»¶ç³»ç»Ÿå¹¶æ‰§è¡Œç›®æ ‡ç¨‹åºçš„æƒé™ã€‚</p></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-a7c9e10a31abdecaec5a338462a220a8>9 - å¼€å‘æŒ‡å—</h1>
</div>
<div class=td-content>
<h1 id=pg-79fcc7e024580df9da30cdb10805eada>9.1 - å…‹éš†</h1>
<p>æœ¬é¡µä»‹ç»å¦‚ä½•å°† Kubernetes master åˆ†æ”¯å…‹éš†åˆ°æœ¬åœ°ã€‚</p>
<h2 id=å…‹éš†ä¸»åˆ†æ”¯>å…‹éš†ä¸»åˆ†æ”¯</h2>
<p>è¯·å°è¯•åªå…‹éš†ä¸»åˆ†æ”¯ï¼Œç”±äº repos ä»“åº“ä½œä¸º rpm å’Œ deb çš„è½¯ä»¶æºï¼Œç›´æ¥å…‹éš†å…¨éƒ¨ä¼šéå¸¸å¤§ã€‚</p>
<p>å¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å…‹éš†ä¸»åˆ†æ”¯ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone --single-branch -b main https://github.com/klts-io/kubernetes-lts
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-8da562538e76378aaf2ff1c50166f299>9.2 - ä¾èµ–</h1>
<p>æœ¬é¡µä»‹ç»å¦‚ä½•åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šå®‰è£…ä¾èµ–ã€‚</p>
<h2 id=å®‰è£…ä¾èµ–>å®‰è£…ä¾èµ–</h2>
<ul class="nav nav-tabs" id=tabset-zhdocsdeveloper-guidedependent-1 role=tablist><li class=nav-item><a data-toggle=tab class="nav-link active" href=#tabset-zhdocsdeveloper-guidedependent-1-0 role=tab aria-controls=tabset-zhdocsdeveloper-guidedependent-1-0 aria-selected=true>MacOS</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsdeveloper-guidedependent-1-1 role=tab aria-controls=tabset-zhdocsdeveloper-guidedependent-1-1>åŸºäº Red Hat çš„å‘è¡Œç‰ˆ</a></li>
<li class=nav-item><a data-toggle=tab class=nav-link href=#tabset-zhdocsdeveloper-guidedependent-1-2 role=tab aria-controls=tabset-zhdocsdeveloper-guidedependent-1-2>åŸºäº Debian çš„å‘è¡Œç‰ˆ</a></li></ul>
<div class=tab-content id=tabset-zhdocsdeveloper-guidedependent-1><div id=tabset-zhdocsdeveloper-guidedependent-1-0 class="tab-pane show active" role=tabpanel aria-labelledby=tabset-zhdocsdeveloper-guidedependent-1-0>
<p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install jq git python@3 <span style=color:#8f5902;font-style:italic># å®‰è£… brew, è¯·çœ‹ https://brew.sh/</span>
pip3 install yq
</code></pre></div></div>
<div id=tabset-zhdocsdeveloper-guidedependent-1-1 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsdeveloper-guidedependent-1-1>
<p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum install -y epel-release
yum install -y jq git python3
pip3 install yq
</code></pre></div></div>
<div id=tabset-zhdocsdeveloper-guidedependent-1-2 class=tab-pane role=tabpanel aria-labelledby=tabset-zhdocsdeveloper-guidedependent-1-2>
<p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>apt-get install -y jq git python3 python3-pip
pip3 install yq
</code></pre></div></div></div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/klts-io aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack>
<a class=text-white target=_blank rel=noopener href=https://klts.slack.com aria-label=Slack>
<i class="fab fa-slack"></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list">
<a class=text-white target=_blank rel=noopener href=mailto:klts-io@googlegroups.com aria-label="Developer mailing list">
<i class="fa fa-envelope"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 The KLTS.io Authors ç‰ˆæƒæ‰€æœ‰</small>
<p class=mt-2><a href=/zh/about/>å…³äº KLTS</a></p>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script>
</body>
</html>